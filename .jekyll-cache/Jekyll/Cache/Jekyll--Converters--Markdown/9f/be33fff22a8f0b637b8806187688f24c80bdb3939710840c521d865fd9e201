I"ßï<p><a href="/work-n-play/how-to-use-value-object-in-laravel-eloquent/">ì§€ë‚œ í¬ìŠ¤íŠ¸</a>ì— ì´ì–´ì„œ, ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œ ë‘ë²ˆì§¸ ì„¸ë²ˆì§¸ ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.</p>

<ol>
  <li>ë³€ê²½ìì™€ ì ‘ê·¼ì(Attribute Mutator &amp; Accessor)ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•</li>
  <li>LOB(Large Object)ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•</li>
  <li>ì°¸ì¡°(ì™¸ë˜í‚¤)ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•</li>
</ol>

<p><a href="/images/2019-02-08-img-01.png"><img src="/images/2019-02-08-img-01.png" alt="ORM Basic" /></a></p>

<p>ë³¸ë¬¸ ë“¤ì–´ê°€ê¸° ì „ì— ì ê¹ ë”´ ì–˜ê¸°í• ê²Œìš”.</p>

<p>ê°ì²´ëŠ” ì–´ëŠ ìˆœê°„ ì†Œë©¸ë©ë‹ˆë‹¤. PHPëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ë©´ ë©”ëª¨ë¦¬ ìì›ì„ ìš´ì˜ì²´ì œì— ë°˜í™˜í•˜ë©´ì„œ ì†Œë©¸ë˜ê² ì£ , ë˜ëŠ” ê°€ë¹„ì§€ ì½œë ‰ì…˜ì— ì˜í•´ì„œë“ ì§€ìš”. ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì§ì „ì— ì‚¬ìš©í•˜ë˜ ê°ì²´ì˜ ìƒíƒœë¥¼ ì´ì–´ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ì˜ì†í™”ë¼ëŠ” ê³¼ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì˜ì†í™”ì˜ ë„êµ¬ë¡œ DBë¥¼ ì‚¬ìš©í•˜ì£ .</p>

<p>ê·¸ëŸ°ë° ë§ì…ë‹ˆë‹¤. ê°ì²´ì™€ DBëŠ” ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ë°©ì‹ì´ ì™„ì „íˆ ë‹¤ë¦…ë‹ˆë‹¤. ê·¸ë˜ì„œ ê·¸ë¦¼ì—ì„œ ë³´ë“¯ì´ ê°ì²´ì™€ DBê°„ì˜ ì°¨ì´ì ì„ í•´ê²°í•´ì£¼ëŠ” ê²ƒì´ ORMì…ë‹ˆë‹¤.</p>

<!--more-->
<div class="spacer">â€¢ â€¢ â€¢</div>

<h2 id="2-lobë¥¼-ì´ìš©í•˜ëŠ”-ë°©ë²•">2. LOBë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•</h2>

<p>ê°ì²´ë¥¼ <code class="highlighter-rouge">serialize()</code> í•¨ìˆ˜ ë˜ëŠ” <code class="highlighter-rouge">json_encode()</code>ë¡œ ì§ë ¬í™”í•˜ê³ , ë‹¤ì‹œ ì—­ì§ë ¬í™”í•´ì„œ ê°ì²´ë¡œ ì¬ìƒí•  ìˆ˜ ìˆìœ¼ë©´, ì§ë ¬í™”ëœ ë¬¸ì ë©ì–´ë¦¬ë¥¼ LOBë¼ ë¶€ë¦…ë‹ˆë‹¤. LOBëŠ” ì»´í“¨í„°ê°€ ì½ê¸° í¸í•œ BLOB(Binary Large Object)ì™€ ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆëŠ” CLOB(Character Large Object)ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p><code class="highlighter-rouge">serialize()</code> í•¨ìˆ˜ë¡œ ì§ë ¬í™”í•´ì„œ DBì— ì €ì¥í•œ ë°ì´í„°ëŠ” PHPì—ì„œë§Œ êº¼ë‚´ì„œ ì“¸ ìˆ˜ ìˆëŠ” ë°˜ë©´, <code class="highlighter-rouge">json_encode()</code>ë¡œ ì§ë ¬í™”í•˜ë©´ ì–´ë–¤ ì»´í“¨í„° ì–¸ì–´ì—ì„œë“  êº¼ë‚´ì„œ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰ PHP ì§ë ¬í™”ëŠ” ë°ì´í„°ê°€ PHP í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì— ì¢…ì†ë˜ëŠ” ê²°ê³¼ë¥¼ ì´ˆë˜í•˜ë¯€ë¡œ ì‹ ì¤‘í•˜ê²Œ ìƒê°í•˜ê³  ê²°ì •í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<p>1ì ˆì—ì„œ ê°ì²´ì˜ í•„ë“œë¥¼ DB ì»¬ëŸ¼ì— ì¼ëŒ€ì¼ë¡œ ë§µí•‘í•œ ë°˜ë©´, LOBë¥¼ ì´ìš©í•œ ë°©ë²•ì€ ì•„ë˜ ê·¸ë¦¼ì²˜ëŸ¼ ê°ì²´ë¥¼ DB ì»¬ëŸ¼ í•˜ë‚˜ì— ë§µí•‘í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+--------------------+
| class Customer     |
+--------------------+
| - name: string     |
| - address: Address |
+--------------------+

+--------------------+
| table customers    |
+--------------------+
| - <span class="nb">id</span>: int          |
| - name: varchar    |
| - address: json    |
+--------------------+
</code></pre></div></div>

<h3 id="21-ìŠ¤í‚¤ë§ˆ-ë§ˆì´ê·¸ë ˆì´ì…˜">2.1. ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜</h3>

<p>1ì ˆì—ì„œ ì£¼ì†Œ ê°ì²´ì˜ í•„ë“œë¥¼ DB ì»¬ëŸ¼ìœ¼ë¡œ ì­ˆìš± ëŠ˜ì–´ ë†“ì§€ ì•Šê³ , í•˜ë‚˜ì˜ ì»¬ëŸ¼ì— ë„£ìŒìœ¼ë¡œì„œ ìŠ¤í‚¤ë§ˆëŠ” í•œê²° ê°„í¸í•´ì¡ŒìŠµë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// database/migrations/2019_02_07_000000_create_customers_table.php</span>

<span class="kn">use</span> <span class="nn">Illuminate\Support\Facades\Schema</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">CreateCustomersTable</span> <span class="k">extends</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">'customers'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">increments</span><span class="p">(</span><span class="s1">'id'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ê³ ê° ì´ë¦„'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="s1">'address'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ê³ ê° ì£¼ì†Œ'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">dropIfExists</span><span class="p">(</span><span class="s1">'customers'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>php artisan migrate
<span class="c">#Migrating: 2019_02_07_000000_create_customers_table</span>
<span class="c">#Migrated:  2019_02_07_000000_create_customers_table</span>
</code></pre></div></div>

<h3 id="22-ì—”í‹°í‹°ì™€-ê°’-ê°ì²´-ê·¸ë¦¬ê³ -íŒ©í† ë¦¬">2.2. ì—”í‹°í‹°ì™€ ê°’ ê°ì²´, ê·¸ë¦¬ê³  íŒ©í† ë¦¬</h3>

<p>1ì ˆì—ì„œ ë§Œë“  ì£¼ì†Œ ê°ì²´ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê³ , <code class="highlighter-rouge">Customer</code> ëª¨ë¸ë§Œ ì¡°ê¸ˆ ê³ ì³¤ìŠµë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git checkout attr-accessor-mutator <span class="nt">--</span> app/Address.php app/JibunAddress.php app/RoadAddress.php app/Customer.php database/factories/CustomerFactory.php
</code></pre></div></div>

<p><code class="highlighter-rouge">setAddressAttribute()</code> ë³€ê²½ìì—ì„œ <code class="highlighter-rouge">customers.address:json</code> ì»¬ëŸ¼ì— ì €ì¥í•˜ê¸° ìœ„í•´ JSONìœ¼ë¡œ ì§ë ¬í™”í•˜ëŠ” ë¶€ë¶„ì„ ì£¼ëª©í•´ì£¼ì„¸ìš”.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// app/Customer.php</span>

<span class="kn">namespace</span> <span class="nn">App</span><span class="p">;</span>

<span class="kn">use</span> <span class="nn">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>

<span class="cd">/**
 * App\Customer
 *
 * @property int $id
 * @property string $name ê³ ê° ì´ë¦„
 * @property Address $address ê³ ê° ì£¼ì†Œ
 * @property \Illuminate\Support\Carbon|null $created_at
 * @property \Illuminate\Support\Carbon|null $updated_at
 * @mixin \Eloquent
 */</span>
<span class="kd">class</span> <span class="nc">Customer</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getAddressAttribute</span><span class="p">(</span><span class="kt">string</span> <span class="nv">$address</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">AddressFactory</span><span class="o">::</span><span class="na">createFromJson</span><span class="p">(</span><span class="nv">$address</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setAddressAttribute</span><span class="p">(</span><span class="nx">Address</span> <span class="nv">$address</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="p">[</span><span class="s1">'address'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$address</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>PHP ì§ë ¬í™”ë¥¼ ì„ íƒí–ˆë‹¤ë©´ ë³€ê²½ìì—ì„œ <code class="highlighter-rouge">json_encode()</code> ëŒ€ì‹  <code class="highlighter-rouge">serialize()</code>ë¡œ ì§ë ¬í™”í•´ì„œ ì €ì¥í•˜ê³  <code class="highlighter-rouge">unserizlize()</code>ë¡œ êº¼ë‚´ì„œ ë°”ë¡œ PHP ê°ì²´ë¡œ ì¬ìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•ì„œ ì–¸ê¸‰í•œ í”Œë«í¼ ì˜ì¡´ì„±ì„ í”¼í•˜ê³ ì JSON í˜•ì‹ì„ ì„ íƒí–ˆê³ , DBì—ì„œ êº¼ë‚´ ì“¸ ë•ŒëŠ” JSONì„ ê°ì²´ë¡œ ì¬ìƒí•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ì´ ì—­í• ì„ <code class="highlighter-rouge">AddressFactory</code>í´ë˜ìŠ¤ê°€ ë‹´ë‹¹í•©ë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// app/AddressFactory.php</span>

<span class="kn">namespace</span> <span class="nn">App</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">AddressFactory</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">createFromJson</span><span class="p">(</span><span class="kt">string</span> <span class="nv">$json</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$u</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$json</span><span class="p">);</span>

        <span class="nv">$j</span> <span class="o">=</span> <span class="nv">$u</span><span class="o">-&gt;</span><span class="na">jibunAddress</span> <span class="o">??</span> <span class="kc">null</span><span class="p">;</span>
        <span class="nv">$jibunAddress</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">JibunAddress</span><span class="p">(</span>
            <span class="nv">$j</span><span class="o">-&gt;</span><span class="na">adminDongName</span> <span class="o">??</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nv">$j</span><span class="o">-&gt;</span><span class="na">legalDongName</span> <span class="o">??</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nv">$j</span><span class="o">-&gt;</span><span class="na">legalRiName</span> <span class="o">??</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nv">$j</span><span class="o">-&gt;</span><span class="na">isMountain</span> <span class="o">??</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nv">$j</span><span class="o">-&gt;</span><span class="na">jibunNumber</span> <span class="o">??</span> <span class="kc">null</span>
        <span class="p">);</span>

        <span class="nv">$r</span> <span class="o">=</span> <span class="nv">$u</span><span class="o">-&gt;</span><span class="na">roadAddress</span> <span class="o">??</span> <span class="kc">null</span><span class="p">;</span>
        <span class="nv">$roadAddress</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RoadAddress</span><span class="p">(</span>
            <span class="nv">$r</span><span class="o">-&gt;</span><span class="na">roadName</span> <span class="o">??</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nv">$r</span><span class="o">-&gt;</span><span class="na">isBasement</span> <span class="o">??</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nv">$r</span><span class="o">-&gt;</span><span class="na">buildingNumber</span> <span class="o">??</span> <span class="kc">null</span>
        <span class="p">);</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nx">Address</span><span class="p">(</span>
            <span class="nv">$u</span><span class="o">-&gt;</span><span class="na">siDo</span> <span class="o">??</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nv">$u</span><span class="o">-&gt;</span><span class="na">siGunGu</span> <span class="o">??</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nv">$jibunAddress</span><span class="p">,</span>
            <span class="nv">$roadAddress</span><span class="p">,</span>
            <span class="nv">$u</span><span class="o">-&gt;</span><span class="na">detailAddress</span> <span class="o">??</span> <span class="kc">null</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">Address</code>, <code class="highlighter-rouge">JibunAddress</code>, <code class="highlighter-rouge">RoadAddress</code>ì˜ í•„ë“œ ì´ë¦„ì´ ë³€ê²½ë˜ê±°ë‚˜, ì¶”ê°€, ì‚­ì œëœ ê²½ìš°ë¥¼ ìƒìƒí•´ë³´ì£ . ì¬ìƒì„ ìœ„í•œ ì„¤ê³„ë„ê°€ ë˜ëŠ” í´ë˜ìŠ¤ê°€ ë³€ê²½ëœ ìƒíƒœì—ì„œ ë‹¤ì‹œ ê°ì²´ë¡œ ìƒì„±í•  ìˆ˜ ìˆì„ê¹Œìš”? JSONìœ¼ë¡œ ì§ë ¬í™”í–ˆë‹¤ë©´ ê°€ëŠ¥í•©ë‹ˆë‹¤. PHPë¡œ ì§ë ¬í™”í–ˆë‹¤ë©´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

<h3 id="23-optional-ëª¨ë¸-íŒ©í† ë¦¬">2.3. [Optional] ëª¨ë¸ íŒ©í† ë¦¬</h3>

<p>1ì ˆì—ì„œ ë§Œë“  ê²ƒì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>

<h3 id="24-í…ŒìŠ¤íŠ¸">2.4. í…ŒìŠ¤íŠ¸</h3>

<p>ì•„ë˜ ì½”ë“œì—ì„œ <code class="highlighter-rouge">Customer.address</code> í•„ë“œì— JSONì´ ê·¸ëŒ€ë¡œ ë‹´ê²¨ìˆëŠ”ê²Œ ë³´ì…ë‹ˆë‹¤. ì—˜ë¡œí€€íŠ¸ëŠ” í™œì„± ë ˆì½”ë“œ íŒ¨í„´ì´ë¼ ëª¨ë¸ ìì²´ê°€ DBë¼ ë³¼ ìˆ˜ ìˆê³ , DBì—ì„œ ì½ì€ ì»¬ëŸ¼ì˜ ê°’ì„ ê°ì²´ì˜ í•„ë“œì— ê·¸ëƒ¥ ë‹´ì•„ ë†“ì€ ê²ƒì´ë¼ ë³´ì‹œë©´ ë©ë‹ˆë‹¤.</p>

<p>ì ‘ê·¼ìë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ë¹„ë¡œì†Œ <code class="highlighter-rouge">Address</code> ê°ì²´ë¡œ ë°”ë€ë‹ˆë‹¤. ì ‘ê·¼ìë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ë²•ì€ ì ‘ê·¼ì í•¨ìˆ˜ë¥¼ ì§ì ‘ ë¶ˆëŸ¬ë„ ë˜ì§€ë§Œ, <code class="highlighter-rouge">$c1-&gt;address</code> ì²˜ëŸ¼ í•„ë“œì— ì ‘ê·¼í•˜ë©´ í˜¸ì¶œë©ë‹ˆë‹¤. ì•„ë˜ ì½”ë“œì—ì„œ ì ‘ê·¼ìì—ì„œ <code class="highlighter-rouge">AddressFactory</code>ë¥¼ ì´ìš©í•´ì„œ <code class="highlighter-rouge">App\Address {#2958}</code>ë¡œ ì¬ìƒí•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>php artisan tinker
<span class="c"># ì—”í‹°í‹° ìƒì„± ë° ì˜ì†í™”</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span> <span class="o">=</span> factory<span class="o">(</span>App<span class="se">\C</span>ustomer::class<span class="o">)</span>-&gt;create<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> App<span class="se">\C</span>ustomer <span class="o">{</span><span class="c">#2963</span>
     name: <span class="s2">"Ms. Yadira Beatty III"</span>,
     address: <span class="s2">"{"</span>siDo<span class="s2">":"</span><span class="se">\u</span>c11c<span class="se">\u</span>c6b8<span class="se">\u</span>d2b9<span class="se">\u</span>bcc4<span class="se">\u</span>c2dc<span class="s2">","</span>siGuGu<span class="s2">":"</span><span class="se">\u</span>ac15<span class="se">\u</span>b0a8<span class="se">\u</span>ad6c<span class="s2">","</span>jibunAddress<span class="s2">":{"</span>adminDongName<span class="s2">":"</span><span class="se">\u</span>c0bc<span class="se">\u</span>c1311<span class="se">\u</span>b3d9<span class="s2">","</span>legalDongName<span class="s2">":"</span><span class="se">\u</span>c0bc<span class="se">\u</span>c131<span class="se">\u</span>b3d9<span class="s2">","</span>legalRiName<span class="s2">":null,"</span>isMountain<span class="s2">":false,"</span>jibunNumber<span class="s2">":"</span>162-17<span class="s2">"},"</span>roadAddress<span class="s2">":{"</span>roadName<span class="s2">":"</span><span class="se">\u</span>bd09<span class="se">\u</span>c740<span class="se">\u</span>c0ac<span class="se">\u</span>b85c112<span class="se">\u</span>ae38<span class="s2">","</span>isBasement<span class="s2">":false,"</span>buildingNumber<span class="s2">":"</span>6<span class="s2">"},"</span>detailAddress<span class="s2">":"</span><span class="se">\u</span>c775<span class="se">\u</span>c131<span class="se">\u</span>be4c<span class="se">\u</span>b529 5<span class="se">\u</span>ce35 <span class="se">\u</span>ba54<span class="se">\u</span>c26c<span class="se">\u</span>cf54<span class="se">\u</span>b9ac<span class="se">\u</span>c544<span class="s2">"}"</span>,
     updated_at: <span class="s2">"2019-02-07 15:07:49"</span>,
     created_at: <span class="s2">"2019-02-07 15:07:49"</span>,
     <span class="nb">id</span>: 1,
   <span class="o">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c2</span> <span class="o">=</span> factory<span class="o">(</span>App<span class="se">\C</span>ustomer::class<span class="o">)</span>-&gt;create<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> App<span class="se">\C</span>ustomer <span class="o">{</span><span class="c">#2969</span>
     name: <span class="s2">"Pattie Crist PhD"</span>,
     address: <span class="s2">"{"</span>siDo<span class="s2">":"</span><span class="se">\u</span>c11c<span class="se">\u</span>c6b8<span class="se">\u</span>d2b9<span class="se">\u</span>bcc4<span class="se">\u</span>c2dc<span class="s2">","</span>siGuGu<span class="s2">":"</span><span class="se">\u</span>ac15<span class="se">\u</span>b0a8<span class="se">\u</span>ad6c<span class="s2">","</span>jibunAddress<span class="s2">":{"</span>adminDongName<span class="s2">":"</span><span class="se">\u</span>c0bc<span class="se">\u</span>c1311<span class="se">\u</span>b3d9<span class="s2">","</span>legalDongName<span class="s2">":"</span><span class="se">\u</span>c0bc<span class="se">\u</span>c131<span class="se">\u</span>b3d9<span class="s2">","</span>legalRiName<span class="s2">":null,"</span>isMountain<span class="s2">":false,"</span>jibunNumber<span class="s2">":"</span>162-17<span class="s2">"},"</span>roadAddress<span class="s2">":{"</span>roadName<span class="s2">":"</span><span class="se">\u</span>bd09<span class="se">\u</span>c740<span class="se">\u</span>c0ac<span class="se">\u</span>b85c112<span class="se">\u</span>ae38<span class="s2">","</span>isBasement<span class="s2">":false,"</span>buildingNumber<span class="s2">":"</span>6<span class="s2">"},"</span>detailAddress<span class="s2">":"</span><span class="se">\u</span>c775<span class="se">\u</span>c131<span class="se">\u</span>be4c<span class="se">\u</span>b529 5<span class="se">\u</span>ce35 <span class="se">\u</span>ba54<span class="se">\u</span>c26c<span class="se">\u</span>cf54<span class="se">\u</span>b9ac<span class="se">\u</span>c544<span class="s2">"}"</span>,
     updated_at: <span class="s2">"2019-02-07 15:07:54"</span>,
     created_at: <span class="s2">"2019-02-07 15:07:54"</span>,
     <span class="nb">id</span>: 2,
   <span class="o">}</span>

<span class="c"># ì—”í‹°í‹° ë° ê°’ ê°ì²´ì˜ í•„ë“œ ì ‘ê·¼</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address<span class="p">;</span>
<span class="o">=&gt;</span> App<span class="se">\A</span>ddress <span class="o">{</span><span class="c">#2958}</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address-&gt;getSiDo<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="s2">"ì„œìš¸íŠ¹ë³„ì‹œ"</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address-&gt;getJibunAddress<span class="o">()</span>-&gt;getJibunNumber<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="s2">"162-17"</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address-&gt;toArray<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="o">[</span>
     <span class="s2">"siDo"</span> <span class="o">=&gt;</span> <span class="s2">"ì„œìš¸íŠ¹ë³„ì‹œ"</span>,
     <span class="s2">"siGuGu"</span> <span class="o">=&gt;</span> null,
     <span class="s2">"jibunAddress"</span> <span class="o">=&gt;</span> <span class="o">[</span>
       <span class="s2">"adminDongName"</span> <span class="o">=&gt;</span> <span class="s2">"ì‚¼ì„±1ë™"</span>,
       <span class="s2">"legalDongName"</span> <span class="o">=&gt;</span> <span class="s2">"ì‚¼ì„±ë™"</span>,
       <span class="s2">"legalRiName"</span> <span class="o">=&gt;</span> null,
       <span class="s2">"isMountain"</span> <span class="o">=&gt;</span> <span class="nb">false</span>,
       <span class="s2">"jibunNumber"</span> <span class="o">=&gt;</span> <span class="s2">"162-17"</span>,
     <span class="o">]</span>,
     <span class="s2">"roadAddress"</span> <span class="o">=&gt;</span> <span class="o">[</span>
       <span class="s2">"roadName"</span> <span class="o">=&gt;</span> <span class="s2">"ë´‰ì€ì‚¬ë¡œ112ê¸¸"</span>,
       <span class="s2">"isBasement"</span> <span class="o">=&gt;</span> <span class="nb">false</span>,
       <span class="s2">"buildingNumber"</span> <span class="o">=&gt;</span> <span class="s2">"6"</span>,
     <span class="o">]</span>,
     <span class="s2">"detailAddress"</span> <span class="o">=&gt;</span> <span class="s2">"ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„"</span>,
   <span class="o">]</span>

<span class="c"># ê°’ ê°ì²´ì˜ ë™ë“± ë¹„êµ</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address-&gt;isEqualTo<span class="o">(</span><span class="nv">$c2</span>-&gt;address<span class="o">)</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="nb">true</span>

<span class="c"># ê°’ ê°ì²´ë¥¼ ì´ìš©í•œ ì½œë ‰ì…˜ í•„í„°ë§</span>
<span class="o">&gt;&gt;&gt;</span> App<span class="se">\C</span>ustomer::get<span class="o">()</span>-&gt;filter<span class="o">(</span><span class="k">function</span> <span class="o">(</span>App<span class="se">\C</span>ustomer <span class="nv">$c</span><span class="o">)</span> <span class="o">{</span>
...     <span class="k">return</span> <span class="nv">$c</span>-&gt;address-&gt;getSiDo<span class="o">()</span> <span class="o">===</span> <span class="s1">'ì„œìš¸íŠ¹ë³„ì‹œ'</span><span class="p">;</span>
... <span class="o">})</span>-&gt;toArray<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="o">[</span>
     <span class="o">[</span>
       <span class="s2">"id"</span> <span class="o">=&gt;</span> 1,
       <span class="s2">"name"</span> <span class="o">=&gt;</span> <span class="s2">"Ms. Yadira Beatty III"</span>,
       <span class="s2">"address"</span> <span class="o">=&gt;</span> App<span class="se">\A</span>ddress <span class="o">{</span><span class="c">#2977},</span>
       <span class="s2">"created_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:07:49"</span>,
       <span class="s2">"updated_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:07:49"</span>,
     <span class="o">]</span>,
     <span class="o">[</span>
       <span class="s2">"id"</span> <span class="o">=&gt;</span> 2,
       <span class="s2">"name"</span> <span class="o">=&gt;</span> <span class="s2">"Pattie Crist PhD"</span>,
       <span class="s2">"address"</span> <span class="o">=&gt;</span> App<span class="se">\A</span>ddress <span class="o">{</span><span class="c">#2961},</span>
       <span class="s2">"created_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:07:54"</span>,
       <span class="s2">"updated_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:07:54"</span>,
     <span class="o">]</span>,
   <span class="o">]</span>
</code></pre></div></div>

<p>ì¿¼ë¦¬ë„ í•´ ë³¼ê¹Œìš”?</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">customers</span><span class="p">;</span>
<span class="cm">/*
{
    "data":
    [
        {
            "id": 1,
            "name": "Ms. Yadira Beatty III",
            "address": "{\"siDo\": \"ì„œìš¸íŠ¹ë³„ì‹œ\", \"siGuGu\": \"ê°•ë‚¨êµ¬\", \"roadAddress\": {\"roadName\": \"ë´‰ì€ì‚¬ë¡œ112ê¸¸\", \"isBasement\": false, \"buildingNumber\": \"6\"}, \"jibunAddress\": {\"isMountain\": false, \"jibunNumber\": \"162-17\", \"legalRiName\": null, \"adminDongName\": \"ì‚¼ì„±1ë™\", \"legalDongName\": \"ì‚¼ì„±ë™\"}, \"detailAddress\": \"ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„\"}",
            "created_at": "2019-02-07 15:07:49",
            "updated_at": "2019-02-07 15:07:49"
        },
        {
            "id": 2,
            "name": "Pattie Crist PhD",
            "address": "{\"siDo\": \"ì„œìš¸íŠ¹ë³„ì‹œ\", \"siGuGu\": \"ê°•ë‚¨êµ¬\", \"roadAddress\": {\"roadName\": \"ë´‰ì€ì‚¬ë¡œ112ê¸¸\", \"isBasement\": false, \"buildingNumber\": \"6\"}, \"jibunAddress\": {\"isMountain\": false, \"jibunNumber\": \"162-17\", \"legalRiName\": null, \"adminDongName\": \"ì‚¼ì„±1ë™\", \"legalDongName\": \"ì‚¼ì„±ë™\"}, \"detailAddress\": \"ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„\"}",
            "created_at": "2019-02-07 15:07:54",
            "updated_at": "2019-02-07 15:07:54"
        }
    ]
}
*/</span>
</code></pre></div></div>

<p>1í¸ì—ì„œ ì–¸ê¸‰í–ˆë‹¤ì‹œí”¼ ì»¬ëŸ¼ì´ ìª¼ê°œì ¸ ìˆì§€ ì•Šì•„ì„œ, ì¿¼ë¦¬í•˜ê¸°ëŠ” ë¶ˆí¸í•©ë‹ˆë‹¤. JSON ì»¬ëŸ¼ìœ¼ë¡œ ì„ ì–¸í–ˆë‹¤ë©´ ì•„ì£¼ ë¶ˆê°€ëŠ¥í•˜ì§€ëŠ” ì•Šì§€ë§Œìš”â€¦</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> 
    <span class="n">id</span><span class="p">,</span>
    <span class="n">name</span><span class="p">,</span>
    <span class="n">JSON_EXTRACT</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="nv">"$.siDo"</span><span class="p">)</span> <span class="k">as</span> <span class="n">SI_DO_NAME</span>
<span class="k">FROM</span> <span class="n">customers</span><span class="p">;</span>

<span class="cm">/*
id  name    SI_DO_NAME
1   Ms. Yadira Beatty III   "ì„œìš¸íŠ¹ë³„ì‹œ"
2   Pattie Crist PhD    "ì„œìš¸íŠ¹ë³„ì‹œ"
*/</span>
</code></pre></div></div>

<h2 id="3-ì°¸ì¡°ë¥¼-ì´ìš©í•˜ëŠ”-ë°©ë²•">3. ì°¸ì¡°ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•</h2>

<p><code class="highlighter-rouge">customers</code> í…Œì´ë¸”ê³¼ <code class="highlighter-rouge">customer_addresses</code> í…Œì´ë¸”ë¡œ ë‚˜ëˆ„ê³ , ê°ê°ì˜ ì—˜ë¡œí€€íŠ¸ ëª¨ë¸ì„ ë§Œë“  í›„, <code class="highlighter-rouge">HasOne</code>/<code class="highlighter-rouge">BelongsTo</code> ê´€ê³„ë¡œ ì—°ê²°í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ë°ì´í„° ì¤‘ì‹¬ì ì¸ ì„¤ê³„ë¥¼ í•˜ë©´ ì´ëŸ° ê²°ê³¼ê°€ ë‚˜ì˜¤ëŠ”ë°, ê°ì²´ ì§€í–¥ìŠ¤ëŸ½ì§€ ì•Šì•„ì„œ ê¶Œì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

<p>ì´ëŠ” ì—˜ë¡œí€€íŠ¸ORMì˜ í•œê³„ì´ë©°, ë…íŠ¸ë¦°ORMì„ ì‚¬ìš©í•˜ë©´ ì—”í‹°í‹°ì˜ ì†ì„±ì„ ì—¬ëŸ¬ í…Œì´ë¸”ì— ë‚˜ëˆ„ì–´ ì˜ì†í™”í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤(see <a href="https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/tutorials/embeddables.html">https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/tutorials/embeddables.html</a>).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+--------------------+
| class Customer     |
+--------------------+
| - name: string     |
| - address: CustomerAddress 
+--------------------+

+--------------------+
| table customers    |
+--------------------+
| - <span class="nb">id</span>: int          |
| - name: varchar    |
+--------------------+

+--------------------+
| table customer_addresses
+--------------------+
| - <span class="nb">id</span>: int          |
| - customer_id: int |
| - addr_si_do_name: varchar
| - addr_si_gun_gu_name: varchar
| - ...              |
| - addr_detail: varchar
+--------------------+
</code></pre></div></div>

<p>UML &amp; ERDì— ë§ê²Œ ëª¨ë¸, ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜, ëª¨ë¸ íŒ©í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>php artisan make:model CustomerAddress <span class="nt">--migration</span> <span class="nt">--factory</span>
<span class="c">#Model created successfully.</span>
<span class="c">#Factory created successfully.</span>
<span class="c">#Created Migration: 2019_02_07_000200_create_customer_addresses_table</span>
</code></pre></div></div>

<h3 id="31-ìŠ¤í‚¤ë§ˆ-ë§ˆì´ê·¸ë ˆì´ì…˜">3.1. ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// database/migrations/2019_02_07_000100_create_customers_table.php</span>

<span class="kn">use</span> <span class="nn">Illuminate\Support\Facades\Schema</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">CreateCustomersTable</span> <span class="k">extends</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">'customers'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">increments</span><span class="p">(</span><span class="s1">'id'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'name'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">dropIfExists</span><span class="p">(</span><span class="s1">'customers'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// database/migrations/2019_02_07_000200_create_customer_addresses_table.php</span>

<span class="kn">use</span> <span class="nn">Illuminate\Support\Facades\Schema</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">CreateCustomerAddressesTable</span> <span class="k">extends</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">'customer_addresses'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">increments</span><span class="p">(</span><span class="s1">'id'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">unsignedInteger</span><span class="p">(</span><span class="s1">'customer_id'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">index</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_si_do_name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ì‹œë„'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_si_gun_gu_name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ì‹œêµ°êµ¬'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_admin_dong_name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'í–‰ì •ë™'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_legal_dong_name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ë²•ì •ë™'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_legal_ri_name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ë²•ì •ë¦¬'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">boolean</span><span class="p">(</span><span class="s1">'addr_is_mountain'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">default</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ì‚° ì—¬ë¶€ (0:ëŒ€ì§€, 1:ì‚°)'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_jibun_number'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ì§€ë²ˆ'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_road_name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ë„ë¡œëª…'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">unsignedTinyInteger</span><span class="p">(</span><span class="s1">'addr_is_basement'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">default</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ì§€í•˜ ì—¬ë¶€ (0:ì§€ìƒ, 1:ì§€í•˜, 2:ê³µì¤‘)'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_building_number'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ê±´ë¬¼ë²ˆí˜¸'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_detail'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ìƒì„¸ì£¼ì†Œ (ê±´ë¬¼ëª… ë“±)'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>

            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">foreign</span><span class="p">(</span><span class="s1">'customer_id'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">references</span><span class="p">(</span><span class="s1">'id'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">on</span><span class="p">(</span><span class="s1">'customers'</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">dropIfExists</span><span class="p">(</span><span class="s1">'customer_addresses'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>php artisan migrate
<span class="c">#Migrating: 2019_02_07_000100_create_customers_table</span>
<span class="c">#Migrated:  2019_02_07_000100_create_customers_table</span>
<span class="c">#Migrating: 2019_02_07_000200_create_customer_addresses_table</span>
<span class="c">#Migrated:  2019_02_07_000200_create_customer_addresses_table</span>
</code></pre></div></div>

<h3 id="32-ì—”í‹°í‹°">3.2. ì—”í‹°í‹°</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// app/Customer.php</span>

<span class="kn">namespace</span> <span class="nn">App</span><span class="p">;</span>

<span class="kn">use</span> <span class="nn">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>

<span class="cd">/**
 * App\Customer
 *
 * @property int $id
 * @property string $name
 * @property \Illuminate\Support\Carbon|null $created_at
 * @property \Illuminate\Support\Carbon|null $updated_at
 * @property-read \App\CustomerAddress $address
 * @mixin \Eloquent
 */</span>
<span class="kd">class</span> <span class="nc">Customer</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">address</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasOne</span><span class="p">(</span><span class="nx">CustomerAddress</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">'customer_id'</span><span class="p">,</span> <span class="s1">'id'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// app/CustomerAddress.php</span>

<span class="kn">namespace</span> <span class="nn">App</span><span class="p">;</span>

<span class="kn">use</span> <span class="nn">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>

<span class="cd">/**
 * App\CustomerAddress
 *
 * @property int $id
 * @property int $customer_id
 * @property string $addr_si_do_name ì‹œë„
 * @property string|null $addr_si_gun_gu_name ì‹œêµ°êµ¬
 * @property string|null $addr_admin_dong_name í–‰ì •ë™
 * @property string|null $addr_legal_dong_name ë²•ì •ë™
 * @property string|null $addr_legal_ri_name ë²•ì •ë¦¬
 * @property int $addr_is_mountain ì‚° ì—¬ë¶€ (0:ëŒ€ì§€, 1:ì‚°)
 * @property string|null $addr_jibun_number ì§€ë²ˆ
 * @property string|null $addr_road_name ë„ë¡œëª…
 * @property int $addr_is_basement ì§€í•˜ ì—¬ë¶€ (0:ì§€ìƒ, 1:ì§€í•˜, 2:ê³µì¤‘)
 * @property string|null $addr_building_number ê±´ë¬¼ë²ˆí˜¸
 * @property string|null $addr_detail ìƒì„¸ì£¼ì†Œ (ê±´ë¬¼ëª… ë“±)
 * @property \Illuminate\Support\Carbon|null $created_at
 * @property \Illuminate\Support\Carbon|null $updated_at
 * @property-read \App\Customer $customer
 * @mixin \Eloquent
 */</span>
<span class="kd">class</span> <span class="nc">CustomerAddress</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">customer</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="nx">Customer</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">'customer_id'</span><span class="p">,</span> <span class="s1">'id'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="33-optional-ëª¨ë¸-íŒ©í† ë¦¬">3.3. [Optional] ëª¨ë¸ íŒ©í† ë¦¬</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// database/factories/CustomerAddressFactory.php</span>

<span class="kn">use</span> <span class="nn">Faker\Generator</span> <span class="k">as</span> <span class="n">Faker</span><span class="p">;</span>

<span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">define</span><span class="p">(</span><span class="nx">App\CustomerAddress</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Faker</span> <span class="nv">$faker</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="s1">'addr_si_do_name'</span> <span class="o">=&gt;</span> <span class="s1">'ì„œìš¸íŠ¹ë³„ì‹œ'</span><span class="p">,</span>
        <span class="s1">'addr_si_gun_gu_name'</span> <span class="o">=&gt;</span> <span class="s1">'ê°•ë‚¨êµ¬'</span><span class="p">,</span>
        <span class="s1">'addr_admin_dong_name'</span> <span class="o">=&gt;</span> <span class="s1">'ì‚¼ì„±1ë™'</span><span class="p">,</span>
        <span class="s1">'addr_legal_dong_name'</span> <span class="o">=&gt;</span> <span class="s1">'ì‚¼ì„±ë™'</span><span class="p">,</span>
        <span class="s1">'addr_legal_ri_name'</span> <span class="o">=&gt;</span> <span class="kc">null</span><span class="p">,</span>
        <span class="s1">'addr_is_mountain'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
        <span class="s1">'addr_jibun_number'</span> <span class="o">=&gt;</span> <span class="s1">'162-17'</span><span class="p">,</span>
        <span class="s1">'addr_road_name'</span> <span class="o">=&gt;</span> <span class="s1">'ë´‰ì€ì‚¬ë¡œ12ê¸¸'</span><span class="p">,</span>
        <span class="s1">'addr_is_basement'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s1">'addr_building_number'</span> <span class="o">=&gt;</span> <span class="s1">'6'</span><span class="p">,</span>
        <span class="s1">'addr_detail'</span> <span class="o">=&gt;</span> <span class="s1">'ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„'</span><span class="p">,</span>
    <span class="p">];</span>
<span class="p">});</span>
</code></pre></div></div>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// database/factories/CustomerFactory.php</span>

<span class="kn">use</span> <span class="nn">Faker\Generator</span> <span class="k">as</span> <span class="n">Faker</span><span class="p">;</span>

<span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">define</span><span class="p">(</span><span class="nx">App\Customer</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Faker</span> <span class="nv">$faker</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="nv">$faker</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">,</span>
    <span class="p">];</span>
<span class="p">});</span>

<span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">afterCreating</span><span class="p">(</span><span class="nx">App\Customer</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">App\Customer</span> <span class="nv">$customer</span><span class="p">,</span> <span class="nx">Faker</span> <span class="nv">$faker</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">address</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nx">factory</span><span class="p">(</span><span class="nx">App\CustomerAddress</span><span class="o">::</span><span class="na">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">make</span><span class="p">());</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="34-í…ŒìŠ¤íŠ¸">3.4. í…ŒìŠ¤íŠ¸</h3>

<p><code class="highlighter-rouge">CustomerAddress</code> ëª¨ë¸ì€ ê¸°ë³¸ í‚¤(<code class="highlighter-rouge">id</code>)ê°€ ìˆì–´ì„œ ê°’ ê°ì²´ì¸ì§€ ì—”í‹°í‹°ì¸ì§€ ëª¨í˜¸í•©ë‹ˆë‹¤. ë‹¹ì—°íˆ <code class="highlighter-rouge">$c1-&gt;address</code> ì™€ <code class="highlighter-rouge">$c2-&gt;address</code>ëŠ” ì„œë¡œ ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ê³µê°„ì„ ì‚¬ìš©í•˜ê³  ê°ì²´ì˜ ì‹ë³„ì í•´ì‹œë„ ì™„ì „íˆ ë‹¤ë¦…ë‹ˆë‹¤(ë¬¼ë¡  ì• ì ˆì—ì„œ ì²˜ëŸ¼ ë™ë“± ë¹„êµ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ë©´ ë©ë‹ˆë‹¤).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>php artisan tinker
<span class="c"># ì—”í‹°í‹° ìƒì„± ë° ì˜ì†í™”</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span> <span class="o">=</span> factory<span class="o">(</span>App<span class="se">\C</span>ustomer::class<span class="o">)</span>-&gt;create<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> App<span class="se">\C</span>ustomer <span class="o">{</span><span class="c">#2963</span>
     name: <span class="s2">"Susanna Effertz"</span>,
     updated_at: <span class="s2">"2019-02-07 15:32:16"</span>,
     created_at: <span class="s2">"2019-02-07 15:32:16"</span>,
     <span class="nb">id</span>: 1,
   <span class="o">}</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c2</span> <span class="o">=</span> factory<span class="o">(</span>App<span class="se">\C</span>ustomer::class<span class="o">)</span>-&gt;create<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> App<span class="se">\C</span>ustomer <span class="o">{</span><span class="c">#2971</span>
     name: <span class="s2">"Pink Gorczany MD"</span>,
     updated_at: <span class="s2">"2019-02-07 15:32:38"</span>,
     created_at: <span class="s2">"2019-02-07 15:32:38"</span>,
     <span class="nb">id</span>: 2,
   <span class="o">}</span>

<span class="c"># ì—”í‹°í‹° ë° ê°’ ê°ì²´ì˜ í•„ë“œ ì ‘ê·¼</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address<span class="p">;</span>
<span class="o">=&gt;</span> App<span class="se">\C</span>ustomerAddress <span class="o">{</span><span class="c">#2961</span>
     <span class="nb">id</span>: 1,
     customer_id: 1,
     addr_si_do_name: <span class="s2">"ì„œìš¸íŠ¹ë³„ì‹œ"</span>,
     addr_si_gun_gu_name: <span class="s2">"ê°•ë‚¨êµ¬"</span>,
     addr_admin_dong_name: <span class="s2">"ì‚¼ì„±1ë™"</span>,
     addr_legal_dong_name: <span class="s2">"ì‚¼ì„±ë™"</span>,
     addr_legal_ri_name: null,
     addr_is_mountain: 0,
     addr_jibun_number: <span class="s2">"162-17"</span>,
     addr_road_name: <span class="s2">"ë´‰ì€ì‚¬ë¡œ12ê¸¸"</span>,
     addr_is_basement: 0,
     addr_building_number: <span class="s2">"6"</span>,
     addr_detail: <span class="s2">"ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„"</span>,
     created_at: <span class="s2">"2019-02-07 15:32:16"</span>,
     updated_at: <span class="s2">"2019-02-07 15:32:16"</span>,
   <span class="o">}</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address-&gt;addr_si_do_name<span class="p">;</span>
<span class="o">=&gt;</span> <span class="s2">"ì„œìš¸íŠ¹ë³„ì‹œ"</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address-&gt;addr_jibun_number<span class="p">;</span>
<span class="o">=&gt;</span> <span class="s2">"162-17"</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address-&gt;toArray<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="o">[</span>
     <span class="s2">"id"</span> <span class="o">=&gt;</span> 1,
     <span class="s2">"customer_id"</span> <span class="o">=&gt;</span> 1,
     <span class="s2">"addr_si_do_name"</span> <span class="o">=&gt;</span> <span class="s2">"ì„œìš¸íŠ¹ë³„ì‹œ"</span>,
     <span class="s2">"addr_si_gun_gu_name"</span> <span class="o">=&gt;</span> <span class="s2">"ê°•ë‚¨êµ¬"</span>,
     <span class="s2">"addr_admin_dong_name"</span> <span class="o">=&gt;</span> <span class="s2">"ì‚¼ì„±1ë™"</span>,
     <span class="s2">"addr_legal_dong_name"</span> <span class="o">=&gt;</span> <span class="s2">"ì‚¼ì„±ë™"</span>,
     <span class="s2">"addr_legal_ri_name"</span> <span class="o">=&gt;</span> null,
     <span class="s2">"addr_is_mountain"</span> <span class="o">=&gt;</span> 0,
     <span class="s2">"addr_jibun_number"</span> <span class="o">=&gt;</span> <span class="s2">"162-17"</span>,
     <span class="s2">"addr_road_name"</span> <span class="o">=&gt;</span> <span class="s2">"ë´‰ì€ì‚¬ë¡œ12ê¸¸"</span>,
     <span class="s2">"addr_is_basement"</span> <span class="o">=&gt;</span> 0,
     <span class="s2">"addr_building_number"</span> <span class="o">=&gt;</span> <span class="s2">"6"</span>,
     <span class="s2">"addr_detail"</span> <span class="o">=&gt;</span> <span class="s2">"ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„"</span>,
     <span class="s2">"created_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:32:16"</span>,
     <span class="s2">"updated_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:32:16"</span>,
   <span class="o">]</span>

<span class="c"># ê°’ ê°ì²´ì˜ ë™ë“± ë¹„êµ</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address <span class="o">==</span> <span class="nv">$c2</span>-&gt;address<span class="p">;</span>
<span class="o">=&gt;</span> <span class="nb">false</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address-&gt;is<span class="o">(</span><span class="nv">$c2</span>-&gt;address<span class="o">)</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="nb">false</span>

<span class="c"># ê°’ ê°ì²´ë¥¼ ì´ìš©í•œ ì½œë ‰ì…˜ í•„í„°ë§</span>
<span class="o">&gt;&gt;&gt;</span> App<span class="se">\C</span>ustomer::with<span class="o">(</span><span class="s1">'address'</span><span class="o">)</span>-&gt;get<span class="o">()</span>-&gt;filter<span class="o">(</span><span class="k">function</span> <span class="o">(</span>App<span class="se">\C</span>ustomer <span class="nv">$c</span><span class="o">)</span> <span class="o">{</span>
...     <span class="k">return</span> <span class="nv">$c</span>-&gt;address-&gt;addr_si_do_name <span class="o">===</span> <span class="s1">'ì„œìš¸íŠ¹ë³„ì‹œ'</span><span class="p">;</span>
... <span class="o">})</span>-&gt;toArray<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="o">[</span>
     <span class="o">[</span>
       <span class="s2">"id"</span> <span class="o">=&gt;</span> 1,
       <span class="s2">"name"</span> <span class="o">=&gt;</span> <span class="s2">"Susanna Effertz"</span>,
       <span class="s2">"created_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:32:16"</span>,
       <span class="s2">"updated_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:32:16"</span>,
       <span class="s2">"address"</span> <span class="o">=&gt;</span> <span class="o">[</span>
         <span class="s2">"id"</span> <span class="o">=&gt;</span> 1,
         <span class="s2">"customer_id"</span> <span class="o">=&gt;</span> 1,
         <span class="s2">"addr_si_do_name"</span> <span class="o">=&gt;</span> <span class="s2">"ì„œìš¸íŠ¹ë³„ì‹œ"</span>,
         <span class="s2">"addr_si_gun_gu_name"</span> <span class="o">=&gt;</span> <span class="s2">"ê°•ë‚¨êµ¬"</span>,
         <span class="s2">"addr_admin_dong_name"</span> <span class="o">=&gt;</span> <span class="s2">"ì‚¼ì„±1ë™"</span>,
         <span class="s2">"addr_legal_dong_name"</span> <span class="o">=&gt;</span> <span class="s2">"ì‚¼ì„±ë™"</span>,
         <span class="s2">"addr_legal_ri_name"</span> <span class="o">=&gt;</span> null,
         <span class="s2">"addr_is_mountain"</span> <span class="o">=&gt;</span> 0,
         <span class="s2">"addr_jibun_number"</span> <span class="o">=&gt;</span> <span class="s2">"162-17"</span>,
         <span class="s2">"addr_road_name"</span> <span class="o">=&gt;</span> <span class="s2">"ë´‰ì€ì‚¬ë¡œ12ê¸¸"</span>,
         <span class="s2">"addr_is_basement"</span> <span class="o">=&gt;</span> 0,
         <span class="s2">"addr_building_number"</span> <span class="o">=&gt;</span> <span class="s2">"6"</span>,
         <span class="s2">"addr_detail"</span> <span class="o">=&gt;</span> <span class="s2">"ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„"</span>,
         <span class="s2">"created_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:32:16"</span>,
         <span class="s2">"updated_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:32:16"</span>,
       <span class="o">]</span>,
     <span class="o">]</span>,
     <span class="o">[</span>
       <span class="s2">"id"</span> <span class="o">=&gt;</span> 2,
       <span class="s2">"name"</span> <span class="o">=&gt;</span> <span class="s2">"Pink Gorczany MD"</span>,
       <span class="s2">"created_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:32:38"</span>,
       <span class="s2">"updated_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:32:38"</span>,
       <span class="s2">"address"</span> <span class="o">=&gt;</span> <span class="o">[</span>
         <span class="s2">"id"</span> <span class="o">=&gt;</span> 2,
         <span class="s2">"customer_id"</span> <span class="o">=&gt;</span> 2,
         <span class="s2">"addr_si_do_name"</span> <span class="o">=&gt;</span> <span class="s2">"ì„œìš¸íŠ¹ë³„ì‹œ"</span>,
         <span class="s2">"addr_si_gun_gu_name"</span> <span class="o">=&gt;</span> <span class="s2">"ê°•ë‚¨êµ¬"</span>,
         <span class="s2">"addr_admin_dong_name"</span> <span class="o">=&gt;</span> <span class="s2">"ì‚¼ì„±1ë™"</span>,
         <span class="s2">"addr_legal_dong_name"</span> <span class="o">=&gt;</span> <span class="s2">"ì‚¼ì„±ë™"</span>,
         <span class="s2">"addr_legal_ri_name"</span> <span class="o">=&gt;</span> null,
         <span class="s2">"addr_is_mountain"</span> <span class="o">=&gt;</span> 0,
         <span class="s2">"addr_jibun_number"</span> <span class="o">=&gt;</span> <span class="s2">"162-17"</span>,
         <span class="s2">"addr_road_name"</span> <span class="o">=&gt;</span> <span class="s2">"ë´‰ì€ì‚¬ë¡œ12ê¸¸"</span>,
         <span class="s2">"addr_is_basement"</span> <span class="o">=&gt;</span> 0,
         <span class="s2">"addr_building_number"</span> <span class="o">=&gt;</span> <span class="s2">"6"</span>,
         <span class="s2">"addr_detail"</span> <span class="o">=&gt;</span> <span class="s2">"ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„"</span>,
         <span class="s2">"created_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:32:38"</span>,
         <span class="s2">"updated_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 15:32:38"</span>,
       <span class="o">]</span>,
     <span class="o">]</span>,
   <span class="o">]</span>
</code></pre></div></div>

<p>í…Œì´ë¸”ì´ ìª¼ê°œì ¸ ìˆìœ¼ë‹ˆ, ì¡°ì¸ ì¿¼ë¦¬ë¥¼ í•˜ë©´ ë˜ê² ë„¤ìš”.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> 
<span class="k">FROM</span> <span class="n">customers</span> <span class="k">AS</span> <span class="k">c</span>
<span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">customer_addresses</span> <span class="k">AS</span> <span class="n">a</span>
    <span class="k">ON</span> <span class="k">c</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">customer_id</span><span class="p">;</span>

<span class="cm">/*
{
    "data":
    [
        {
            "id": 1,
            "name": "Susanna Effertz",
            "created_at": "2019-02-07 15:32:16",
            "updated_at": "2019-02-07 15:32:16",
            "id": 1,
            "customer_id": 1,
            "addr_si_do_name": "ì„œìš¸íŠ¹ë³„ì‹œ",
            "addr_si_gun_gu_name": "ê°•ë‚¨êµ¬",
            "addr_admin_dong_name": "ì‚¼ì„±1ë™",
            "addr_legal_dong_name": "ì‚¼ì„±ë™",
            "addr_legal_ri_name": null,
            "addr_is_mountain": 0,
            "addr_jibun_number": "162-17",
            "addr_road_name": "ë´‰ì€ì‚¬ë¡œ12ê¸¸",
            "addr_is_basement": 0,
            "addr_building_number": "6",
            "addr_detail": "ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„",
            "created_at": "2019-02-07 15:32:16",
            "updated_at": "2019-02-07 15:32:16"
        },
        {
            "id": 2,
            "name": "Pink Gorczany MD",
            "created_at": "2019-02-07 15:32:38",
            "updated_at": "2019-02-07 15:32:38",
            "id": 2,
            "customer_id": 2,
            "addr_si_do_name": "ì„œìš¸íŠ¹ë³„ì‹œ",
            "addr_si_gun_gu_name": "ê°•ë‚¨êµ¬",
            "addr_admin_dong_name": "ì‚¼ì„±1ë™",
            "addr_legal_dong_name": "ì‚¼ì„±ë™",
            "addr_legal_ri_name": null,
            "addr_is_mountain": 0,
            "addr_jibun_number": "162-17",
            "addr_road_name": "ë´‰ì€ì‚¬ë¡œ12ê¸¸",
            "addr_is_basement": 0,
            "addr_building_number": "6",
            "addr_detail": "ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„",
            "created_at": "2019-02-07 15:32:38",
            "updated_at": "2019-02-07 15:32:38"
        }
    ]
}
*/</span>
</code></pre></div></div>

<!--more-->
<div class="spacer">â€¢ â€¢ â€¢</div>

<p>ì œê°€ ì•„ëŠ” ë°©ë²•ë§Œ ë‚˜ì—´í–ˆì„ ë¿, ë” ë§ì€ ë°©ë²•ë“¤ì´ ìˆì„ ê²ë‹ˆë‹¤. ì„¤ê³„ ì˜ì‚¬ ê²°ì •ì€ ê°ìì˜ ëª«ì…ë‹ˆë‹¤.</p>

<p>ì§ˆë¬¸ í•˜ë‚˜ ë˜ì ¸ë³¼ê¹Œìš”? ì–´ëŠë‚  ìƒˆë¡œìš´ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì´ ë“¤ì–´ì™”ìŠµë‹ˆë‹¤. â€œê³ ê°ì€ ì£¼ì†Œë¥¼ í•˜ë‚˜ ì´ìƒ ê°€ì§ˆ ìˆ˜ ìˆë‹¤â€ ì–´ë–»ê²Œ ì„¤ê³„í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
:ET