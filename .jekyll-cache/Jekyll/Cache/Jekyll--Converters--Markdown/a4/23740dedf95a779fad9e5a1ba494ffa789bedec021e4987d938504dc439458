I"X<blockquote>
  <p>ê³ ê° ëª©ë¡ì— ê³ ê°ë³„ ìµœê·¼ ì£¼ë¬¸ 1ê±´ì— ëŒ€í•œ ìš”ì•½ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ì„¸ìš”.</p>
</blockquote>

<p>ë¼ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤.</p>

<p>â€œê³ ê°â€ ê°ì²´ì™€ â€œì£¼ë¬¸â€ ê°ì²´ê°„ì˜ ê´€ê³„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+------------+           0..* +------------+
|  Customer  | &lt;&gt;-----------&gt; |   Order    |
+------------+                +------------+
</code></pre></div></div>

<p>ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆì´ì–´ì—ì„œ êµ¬í˜„í•œë‹¤ë©´, ORMì„ í†µí•´ êµ¬í•œ <code class="highlighter-rouge">Collection&lt;Customer&gt;</code>ì„ ìˆœíšŒí•˜ë©´ì„œ, <code class="highlighter-rouge">Customer</code>ê°ì²´ì˜ ë©¤ë²„ í•„ë“œì¸ <code class="highlighter-rouge">Collection&lt;Order&gt;</code>ë¥¼ ëŒ€ìƒìœ¼ë¡œ ìµœê·¼ Order ê°ì²´ë§Œ í•„í„°ë§í–ˆê±°ë‚˜, ì ì ˆí•œ ìˆœì„œë¡œ ì •ë ¬í•˜ì—¬ ë½‘ì•„ ì“°ê¸° ì‰½ë„ë¡ í–ˆì„ê²ë‹ˆë‹¤. ìš”ëŸ° ëŠë‚Œìœ¼ë¡œìš”(ê²€ì¦ ì•ˆëœ Pseudo Code ì…ë‹ˆë‹¤).</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Service Layer</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">listCustomers</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nv">$customers</span><span class="o">-&gt;</span><span class="na">map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Customer</span> <span class="nv">$customer</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$sorted</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">orders</span><span class="o">-&gt;</span><span class="na">sortByDesc</span><span class="p">(</span><span class="s1">'id'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">values</span><span class="p">();</span>
        <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">setRelation</span><span class="p">(</span><span class="s1">'orders'</span><span class="p">,</span> <span class="nv">$sorted</span><span class="p">);</span>
        <span class="k">return</span> <span class="nv">$customer</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="c1">// Controller/View ë“±</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$customers</span> <span class="k">as</span> <span class="nv">$customer</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$lastOrder</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">orders</span><span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>
    <span class="nv">$lastOrder</span><span class="o">-&gt;</span><span class="na">order_number</span><span class="p">;</span> <span class="c1">// ìµœê·¼ ì£¼ë¬¸ ë²ˆí˜¸   </span>
<span class="p">}</span>
</code></pre></div></div>

<p>ë¬¸ì œì ë“¤ì´ ëˆˆì— ë•ë‹ˆë‹¤.</p>

<ul>
  <li>ì‹œê°„ë³µì¡ë„ëŠ” O(m x n)ì…ë‹ˆë‹¤.</li>
  <li>CPUì™€ ë©”ëª¨ë¦¬ë¥¼ í˜¹ì‚¬ì‹œí‚µë‹ˆë‹¤.</li>
  <li><code class="highlighter-rouge">Customer.orders: Collection&lt;Order&gt;</code>ë¥¼ ë¯¸ë¦¬ ë¡œë“œí•˜ì§€ ì•Šì•˜ë‹¤ë©´, N + 1 ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.</li>
  <li>ì´ ì™¸ì—ë„ ì œê°€ ë³´ì§€ ëª»í•œ ë¬¸ì œì ë“¤ì´ ë” ìˆì„ ê²ë‹ˆë‹¤â€¦</li>
</ul>

<p>ì½ê¸° ì „ìš© ì¿¼ë¦¬ì´ë¯€ë¡œ ORMì„ ì“°ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. ì‹¸ê³ , ë¹ ë¥´ê³ , ì•ˆì „í•˜ê²Œ SQLë§Œìœ¼ë¡œ ë½‘ì•„ë‚´ëŠ” ë°©ë²•ì„ ì°¾ì•„ë´¤ìŠµë‹ˆë‹¤.</p>

:ET