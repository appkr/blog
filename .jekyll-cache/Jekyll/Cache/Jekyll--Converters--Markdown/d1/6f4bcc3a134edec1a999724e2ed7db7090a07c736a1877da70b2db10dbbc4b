I"á<p>ì´ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ì—˜ë¡œí€€íŠ¸ ëª¨ë¸ì—ì„œ ê°’ ê°ì²´(Value Object)ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª‡ ê°€ì§€ ë°©ë²•ì„ ê³ ê° ëª¨ë¸ì„ ì˜ˆì œë¡œ ì„¤ëª…í•©ë‹ˆë‹¤.</p>

<ol>
  <li>ë³€ê²½ìì™€ ì ‘ê·¼ì(Attribute Mutator &amp; Accessor)ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•</li>
  <li>LOB(Large Object)ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•</li>
  <li>ì°¸ì¡°(ì™¸ë˜í‚¤)ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•</li>
</ol>

<p>ë¨¼ì € ì´ í¬ìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•  ìš©ì–´ë¥¼ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.</p>

<p><strong>ëª¨ë¸</strong></p>

<p>í˜„ì‹¤ ì„¸ê³„ì˜ ë³µì¡í•œ ë¬¼ì²´ ë˜ëŠ” ì‚¬ìƒì„ ëª©ì ì— ì í•©í•˜ë„ë¡ í•µì‹¬ë§Œ ê°„ì†Œí™”í•œ ê²ƒ. x:1 ë¹„í–‰ê¸° í”„ë¼ëª¨ë¸ì€ ì‹¤ë¬¼ì„ ë³¸ë”° ë§Œë“  ëª¨í˜•ì…ë‹ˆë‹¤. ì›¹ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ëŠ” ì»¨í…ìŠ¤íŠ¸ì—ì„œ ëª¨ë¸ì€ ë¹„ì¦ˆë‹ˆìŠ¤ì— ì°¸ì—¬í•˜ëŠ” ì—¬ëŸ¬ ì‹¤ì²´ì˜ ë³¸ì§ˆì ì¸ íŠ¹ì§•ë§Œ ë½‘ì•„ ì¶”ìƒí™”í•œ ê²ƒì…ë‹ˆë‹¤. e.g. ê³ ê° ëª¨ë¸</p>

<p><strong>ì—”í‹°í‹°ì™€ ê°’ ê°ì²´</strong></p>

<p>ëª¨ë¸ì€ ë‹¤ì‹œ 1) â€œì—”í‹°í‹°â€ì™€ 2) â€œê°’ ê°ì²´â€ë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³ ê°#1ê³¼ ê³ ê°#2ëŠ” ê³ ìœ í•œ ì‹ë³„ìë¡œ êµ¬ë¶„ì§€ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì—”í‹°í‹°ë¼ í•˜ëŠ” ë°˜ë©´, ê³ ê°ì˜ ì£¼ì†ŒëŠ” ì „ì²´ ê°’ìœ¼ë¡œë§Œ ì„œë¡œ ê°™ê³  ë‹¤ë¦„ì„ ì‹ë³„í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê°’ ê°ì²´ë¼ í•©ë‹ˆë‹¤. ê°’ ê°ì²´ëŠ” ë°¸ë¥˜ ì˜¤ë¸Œì íŠ¸, ë˜ëŠ” ì¤„ì—¬ì„œ ë°¸ë¥˜ë¼ê³  ë¶€ë¥´ê¸°ë„ í•©ë‹ˆë‹¤. e.g. ê³ ê° 1ë²ˆê³¼ ê³ ê° 2ë²ˆì€ ì‹ë³„ìì— ì˜í•´ ì„œë¡œ ë‹¤ë¥¸ ëª¨ë¸. ê³ ê° 1ë²ˆê³¼ 2ë²ˆì€ ê°€ì¡±ì¸ë°, ì´ë“¤ì˜ ì£¼ì†Œ â€˜ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì‚¼ì„±ë™ 162-17â€™ê³¼ â€˜ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì‚¼ì„±ë™ 162-17â€™ì€ ì „ì²´ ë¬¸ìì—´ì´ ê°™ìœ¼ë¯€ë¡œ ê°™ì€ ì£¼ì†Œì„.</p>

<p><strong>ì›ì‹œ íƒ€ì…ê³¼ ë°•ìŠ¤ íƒ€ì…</strong></p>

<p>PHP ì–¸ì–´ì—ì„œ int, float, string, array, boolê³¼ ê°™ì€ ë°ì´í„° íƒ€ì…ì„ ì›ì‹œ íƒ€ì…(Primitive Type)ì´ë¼ í•©ë‹ˆë‹¤. 64bit í™˜ê²½ì—ì„œëŠ” intë¼ ì“°ì§€ë§Œ 4byteê°€ ì•„ë‹ˆë¼ 8bytes ì¦‰ 2^64 ë©”ëª¨ë¦¬ ê³µê°„ì„ ì°¨ì§€í•˜ê³ , floatë„ doubleê³¼ ê°™ì€ í‘œí˜„ ë²”ìœ„ë¥¼ ê°€ì§‘ë‹ˆë‹¤(see http://php.net/manual/en/language.types.php). 
ì—¬íŠ¼, ì•„ë˜ ì˜ˆì²˜ëŸ¼ ê³ ê°ì„ ì˜ë¯¸í•  ë•Œ <code class="highlighter-rouge">customer:string</code>ì²˜ëŸ¼ ì›ì‹œíƒ€ì…ìœ¼ë¡œ í‘œí˜„í•˜ê¸° ë³´ë‹¤ëŠ” <code class="highlighter-rouge">customer:Customer</code>ë¡œ ì“°ëŠ” ê²ƒì´ ë” ë§ì€ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì „ë‹¬ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ í›„ìë¥¼ ë°•ìŠ¤ íƒ€ì…(Boxed Type)ì´ë¼ ë¶€ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ë‹¤ì‹œ ë§¥ë½ì— ë”°ë¼ì„œ ì—”í‹°í‹°ë‚˜ ê°’ ê°ì²´ë¡œ ë¶€ë¥¼ ìˆ˜ë„ ìˆê³ ìš”.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$c</span> <span class="o">=</span> <span class="s1">'í™ê¸¸ë™'</span><span class="p">;</span>

<span class="c1">// v.s.</span>

<span class="nv">$c</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Customer</span><span class="p">(</span><span class="s1">'í™ê¸¸ë™'</span><span class="p">);</span>
</code></pre></div></div>

<!--more-->
<div class="spacer">â€¢ â€¢ â€¢</div>

<h2 id="0-ì˜ˆì œë¥¼-ìœ„í•œ-ë¼ˆëŒ€-ì½”ë“œ-ì¤€ë¹„">0. ì˜ˆì œë¥¼ ìœ„í•œ ë¼ˆëŒ€ ì½”ë“œ ì¤€ë¹„</h2>

<p>ìƒˆ ë¼ë¼ë²¨ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“­ë‹ˆë‹¤. <code class="highlighter-rouge">laravel</code> ëª…ë ¹ì–´ë¥¼ ì“¸ ìˆ˜ ì—†ë‹¤ë©´, <a href="https://laravel.com/docs/5.7#installing-laravel">ë¼ë¼ë²¨ ë§¤ë‰´ì–¼</a>ì„ ì°¸ê³ í•´ì„œ Laravel Installerë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>laravel new eloquent-value-object
<span class="nv">$ </span><span class="nb">cd </span>eloquent-value-object
<span class="nv">$ </span>php artisan <span class="nt">--version</span>
<span class="c">#Laravel Framework 5.7.25</span>
<span class="nv">$ </span><span class="nb">cp</span> .env.example .env
</code></pre></div></div>

<p><code class="highlighter-rouge">.env</code>íŒŒì¼ì—ì„œ <code class="highlighter-rouge">DB_DATABASE</code> ê°’ì€ <code class="highlighter-rouge">eloquent_value_object</code>ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤. ì„¤ì •í•œëŒ€ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì‚¬ìš©ìë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">eloquent_value_object</span> <span class="k">DEFAULT</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="o">=</span> <span class="n">utf8</span> <span class="k">DEFAULT</span> <span class="k">COLLATE</span> <span class="o">=</span> <span class="n">utf8_unicode_ci</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="k">CREATE</span> <span class="k">USER</span> <span class="nv">"homestead"</span><span class="o">@</span><span class="nv">"%"</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="nv">"secret"</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="k">GRANT</span> <span class="k">All</span> <span class="k">PRIVILEGES</span> <span class="k">ON</span> <span class="n">eloquent_value_object</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="nv">"homestead"</span><span class="o">@</span><span class="nv">"%"</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">FLUSH</span> <span class="k">PRIVILEGES</span><span class="p">;</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">artisan</code> CLIë¡œ ëª¨ë¸, ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜, ëª¨ë¸ íŒ©í† ë¦¬ ë¼ˆëŒ€ ì½”ë“œë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>php artisan make:model Customer <span class="nt">--migration</span> <span class="nt">--factory</span>
<span class="c">#Model created successfully.</span>
<span class="c">#Factory created successfully.</span>
<span class="c">#Created Migration: 2019_02_07_000000_create_customers_table</span>
</code></pre></div></div>

<h2 id="1-ë³€ê²½ìì™€-ì ‘ê·¼ìë¥¼-ì´ìš©í•˜ëŠ”-ë°©ë²•">1. ë³€ê²½ìì™€ ì ‘ê·¼ìë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•</h2>

<p>ì ‘ê·¼ìì™€ ë³€ê²½ìë¥¼ ì²˜ìŒ ë“¤ì–´ë´¤ë‹¤ë©´ <a href="https://laravel.com/docs/5.7/eloquent-mutators#accessors-and-mutators">ë¼ë¼ë²¨ ë§¤ë‰´ì–¼</a>ì„ ì°¸ê³ í•©ë‹ˆë‹¤.</p>

<p>ì´ ë°©ë²•ì€ ì£¼ì†Œì— ê´€ë ¨ëœ DB ì»¬ëŸ¼ì€ ì •ê·œí™”ëœ í˜•íƒœë¡œ ì‚¬ìš©í•˜ë˜, ì—˜ë¡œí€€íŠ¸ ëª¨ë¸ì—ì„œëŠ” ì£¼ì†Œì™€ ê´€ë ¨ëœ DB ì»¬ëŸ¼ì„ ì¡°í•©í•´ì„œ ì˜ë¯¸ìˆëŠ” PHP ê°ì²´ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ë‹¤ì‹œ ë§í•˜ë©´, ì—˜ë¡œí€€íŠ¸ ëª¨ë¸ì„ DBì— ì˜ì†í™”í•  ë•ŒëŠ” ë³€ê²½ìë¥¼ ì´ìš©í•´ì„œ ê°ì²´ì˜ í•„ë“œë¥¼ DB ì»¬ëŸ¼ìœ¼ë¡œ ê°ê° ë§µí•‘ì‹œí‚¤ê³ , DB ì»¬ëŸ¼ì„ ì½ì–´ì„œ ì—˜ë¡œí€€íŠ¸ ëª¨ë¸ë¡œ ì¬ìƒí•  ë•ŒëŠ” ì ‘ê·¼ìë¥¼ ì´ìš©í•´ì„œ ê°ì²´ì˜ í•„ë“œë¡œ ì…‹íŒ…í•˜ëŠ” ê²ë‹ˆë‹¤.</p>

<p>ì•„ë˜ ê·¸ë¦¼ì—ì„œ <code class="highlighter-rouge">Customer.address</code> í•„ë“œëŠ” <code class="highlighter-rouge">Address</code> íƒ€ì…ì˜ ê°’ ê°ì²´ì¸ë°, <code class="highlighter-rouge">customers.addr_si_do_name</code>, <code class="highlighter-rouge">customers.addr_si_gun_gu_name</code>, <code class="highlighter-rouge">...</code>, <code class="highlighter-rouge">customers.addr_detail</code> ì»¬ëŸ¼ê³¼ ë§µí•‘ë©ë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+--------------------+
| class Customer     |
+--------------------+
| - name: string     |
| - address: Address |
+--------------------+

+--------------------+
| table customers    |
+--------------------+
| - <span class="nb">id</span>: int          |
| - name: varchar    |
| - addr_si_do_name: varchar
| - addr_si_gun_gu_name: varchar
| - ...              |
| - addr_detail: varchar
+--------------------+
</code></pre></div></div>

<h3 id="11-ìŠ¤í‚¤ë§ˆ-ë§ˆì´ê·¸ë ˆì´ì…˜">1.1. ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// database/migrations/2019_02_07_000000_create_customers_table.php</span>

<span class="kn">use</span> <span class="nn">Illuminate\Support\Facades\Schema</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">CreateCustomersTable</span> <span class="k">extends</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">'customers'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">increments</span><span class="p">(</span><span class="s1">'id'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ê³ ê° ì´ë¦„'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_si_do_name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ì‹œë„'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_si_gun_gu_name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ì‹œêµ°êµ¬'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_admin_dong_name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'í–‰ì •ë™'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_legal_dong_name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ë²•ì •ë™'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_legal_ri_name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ë²•ì •ë¦¬'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">boolean</span><span class="p">(</span><span class="s1">'addr_is_mountain'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">default</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ì‚° ì—¬ë¶€ (0:ëŒ€ì§€, 1:ì‚°)'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_jibun_number'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ì§€ë²ˆ'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_road_name'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ë„ë¡œëª…'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">unsignedTinyInteger</span><span class="p">(</span><span class="s1">'addr_is_basement'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">default</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ì§€í•˜ ì—¬ë¶€ (0:ì§€ìƒ, 1:ì§€í•˜, 2:ê³µì¤‘)'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_building_number'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ê±´ë¬¼ë²ˆí˜¸'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">'addr_detail'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">(</span><span class="s1">'ìƒì„¸ì£¼ì†Œ (ê±´ë¬¼ëª… ë“±)'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">dropIfExists</span><span class="p">(</span><span class="s1">'customers'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì ìš©í•©ë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>php artisan migrate
<span class="c">#Migration table created successfully.</span>
<span class="c">#Migrating: 2019_02_07_000000_create_customers_table</span>
<span class="c">#Migrated:  2019_02_07_000000_create_customers_table</span>
</code></pre></div></div>

<h3 id="12-ì—”í‹°í‹°ì™€-ê°’-ê°ì²´">1.2. ì—”í‹°í‹°ì™€ ê°’ ê°ì²´</h3>

<p>ì•¼ë˜ ì½”ë“œì˜ <code class="highlighter-rouge">setAddressAttribute()</code> ë³€ê²½ìì—ì„œ <code class="highlighter-rouge">Address</code> ê°ì²´ì˜ ê° í•„ë“œë¥¼ DB ì»¬ëŸ¼ì— ë§µí•‘í•˜ê³  ìˆìŠµë‹ˆë‹¤. í•œí¸ <code class="highlighter-rouge">getAddressAttribute()</code> ì ‘ê·¼ìì—ì„œëŠ” DB ì»¬ëŸ¼ì„ <code class="highlighter-rouge">Address</code> ê°ì²´ì˜ ê° í•„ë“œë¡œ ë§µí•‘í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>

<p><code class="highlighter-rouge">Cusomer</code>ì˜ ëª¨ë“  ë°ì´í„°ê°€ ë©”ëª¨ë¦¬ì—ì„œ ê°ì²´ë¡œ ì¡´ì¬í•˜ëŠ” ëŸ°íƒ€ì„ì—ëŠ” DB ì»¬ëŸ¼ê³¼ì˜ ê´€ê³„ëŠ” ëª°ë¼ë„ ë˜ë¯€ë¡œ, ì—˜ë¡œí€€íŠ¸ì˜ <code class="highlighter-rouge">$hidden</code> ì†ì„±ì„ ì´ìš©í•´ì„œ ìˆ¨ê²¼ìŠµë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// app/Customer.php</span>

<span class="kn">namespace</span> <span class="nn">App</span><span class="p">;</span>

<span class="kn">use</span> <span class="nn">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>

<span class="cd">/**
 * App\Customer
 *
 * @property int $id
 * @property string $name ê³ ê° ì´ë¦„
 * @property Address $address ê³ ê° ì£¼ì†Œ
 * @property string $addr_si_do_name ì‹œë„
 * @property string|null $addr_si_gun_gu_name ì‹œêµ°êµ¬
 * @property string|null $addr_admin_dong_name í–‰ì •ë™
 * @property string|null $addr_legal_dong_name ë²•ì •ë™
 * @property string|null $addr_legal_ri_name ë²•ì •ë¦¬
 * @property int $addr_is_mountain ì‚° ì—¬ë¶€ (0:ëŒ€ì§€, 1:ì‚°)
 * @property string|null $addr_jibun_number ì§€ë²ˆ
 * @property string|null $addr_road_name ë„ë¡œëª…
 * @property int $addr_is_basement ì§€í•˜ ì—¬ë¶€ (0:ì§€ìƒ, 1:ì§€í•˜, 2:ê³µì¤‘)
 * @property string|null $addr_building_number ê±´ë¬¼ë²ˆí˜¸
 * @property string|null $addr_detail ìƒì„¸ì£¼ì†Œ (ê±´ë¬¼ëª… ë“±)
 * @property \Illuminate\Support\Carbon|null $created_at
 * @property \Illuminate\Support\Carbon|null $updated_at
 * @mixin \Eloquent
 */</span>
<span class="kd">class</span> <span class="nc">Customer</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$hidden</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">'addr_si_do_name'</span><span class="p">,</span>
        <span class="s1">'addr_si_gun_gu_name'</span><span class="p">,</span>
        <span class="s1">'addr_admin_dong_name'</span><span class="p">,</span>
        <span class="s1">'addr_legal_dong_name'</span><span class="p">,</span>
        <span class="s1">'addr_legal_ri_name'</span><span class="p">,</span>
        <span class="s1">'addr_is_mountain'</span><span class="p">,</span>
        <span class="s1">'addr_jibun_number'</span><span class="p">,</span>
        <span class="s1">'addr_road_name'</span><span class="p">,</span>
        <span class="s1">'addr_is_basement'</span><span class="p">,</span>
        <span class="s1">'addr_building_number'</span><span class="p">,</span>
        <span class="s1">'addr_detail'</span><span class="p">,</span>
    <span class="p">];</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getAddressAttribute</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Address</span><span class="p">(</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addr_si_do_name</span><span class="p">,</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addr_si_gun_gu_name</span><span class="p">,</span>
            <span class="k">new</span> <span class="nx">JibunAddress</span><span class="p">(</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addr_admin_dong_name</span><span class="p">,</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addr_legal_dong_name</span><span class="p">,</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addr_legal_ri_name</span><span class="p">,</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addr_is_mountain</span><span class="p">,</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addr_jibun_number</span>
            <span class="p">),</span>
            <span class="k">new</span> <span class="nx">RoadAddress</span><span class="p">(</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addr_road_name</span><span class="p">,</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addr_is_basement</span><span class="p">,</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addr_building_number</span>
            <span class="p">),</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addr_detail</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setAddressAttribute</span><span class="p">(</span><span class="nx">Address</span> <span class="nv">$address</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="p">[</span><span class="s1">'addr_si_do_name'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$address</span><span class="o">-&gt;</span><span class="na">getSiDo</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="p">[</span><span class="s1">'addr_si_gun_gu_name'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$address</span><span class="o">-&gt;</span><span class="na">getSiGunGu</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="p">[</span><span class="s1">'addr_detail'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$address</span><span class="o">-&gt;</span><span class="na">getDetailAddress</span><span class="p">();</span>

        <span class="nv">$jibunAddress</span> <span class="o">=</span> <span class="nv">$address</span><span class="o">-&gt;</span><span class="na">getJibunAddress</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="p">[</span><span class="s1">'addr_admin_dong_name'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$jibunAddress</span><span class="o">-&gt;</span><span class="na">getAdminDongName</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="p">[</span><span class="s1">'addr_legal_dong_name'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$jibunAddress</span><span class="o">-&gt;</span><span class="na">getLegalDongName</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="p">[</span><span class="s1">'addr_legal_ri_name'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$jibunAddress</span><span class="o">-&gt;</span><span class="na">getLegalRiName</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="p">[</span><span class="s1">'addr_is_mountain'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$jibunAddress</span><span class="o">-&gt;</span><span class="na">isMountain</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="p">[</span><span class="s1">'addr_jibun_number'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$jibunAddress</span><span class="o">-&gt;</span><span class="na">getJibunNumber</span><span class="p">();</span>

        <span class="nv">$roadAddress</span> <span class="o">=</span> <span class="nv">$address</span><span class="o">-&gt;</span><span class="na">getRoadAddress</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="p">[</span><span class="s1">'addr_road_name'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$roadAddress</span><span class="o">-&gt;</span><span class="na">getRoadName</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="p">[</span><span class="s1">'addr_is_basement'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$roadAddress</span><span class="o">-&gt;</span><span class="na">isBasement</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="p">[</span><span class="s1">'addr_building_number'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$roadAddress</span><span class="o">-&gt;</span><span class="na">getBuildingNumber</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">Customer</code> í´ë˜ìŠ¤ê°€ ì˜ì¡´í•˜ëŠ” ê°’ ê°ì²´, <code class="highlighter-rouge">Address</code>, <code class="highlighter-rouge">JibunAddress</code>, <code class="highlighter-rouge">RoadAddress</code> í´ë˜ìŠ¤ë¥¼ ë§Œë“­ë‹ˆë‹¤. ì£¼ëª©í•  ì ì€ <code class="highlighter-rouge">isEqualTo()</code> í•¨ìˆ˜ì…ë‹ˆë‹¤. ì•ì„œ ì„¤ëª…í•œ ë°”ì™€ ê°™ì´, ê°’ ê°ì²´ê°„ì˜ ë™ë“± ë¹„êµë¥¼ ìœ„í•´ ëª¨ë“  í•„ë“œì˜ ê°’ì„ ë¹„êµí•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// app/Address.php</span>

<span class="kn">namespace</span> <span class="nn">App</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">Address</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$siDo</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$siGunGu</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$jibunAddress</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$roadAddress</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$detailAddress</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span>
        <span class="kt">string</span> <span class="nv">$siDo</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
        <span class="kt">string</span> <span class="nv">$siGunGu</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">JibunAddress</span> <span class="nv">$jibunAddress</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">RoadAddress</span> <span class="nv">$roadAddress</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
        <span class="kt">string</span> <span class="nv">$detailAddress</span> <span class="o">=</span> <span class="kc">null</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">siDo</span> <span class="o">=</span> <span class="nv">$siDo</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">siGunGu</span> <span class="o">=</span> <span class="nv">$siGunGu</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jibunAddress</span> <span class="o">=</span> <span class="nv">$jibunAddress</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">roadAddress</span> <span class="o">=</span> <span class="nv">$roadAddress</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">detailAddress</span> <span class="o">=</span> <span class="nv">$detailAddress</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getSiDo</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">siDo</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getSiGunGu</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">siGunGu</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getJibunAddress</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jibunAddress</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getRoadAddress</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">roadAddress</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getDetailAddress</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">detailAddress</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">isEqualTo</span><span class="p">(</span><span class="nx">Address</span> <span class="nv">$other</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">siDo</span> <span class="o">===</span> <span class="nv">$other</span><span class="o">-&gt;</span><span class="na">getSiDo</span><span class="p">()</span>
            <span class="o">&amp;&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">siGunGu</span> <span class="o">===</span> <span class="nv">$other</span><span class="o">-&gt;</span><span class="na">getSiGunGu</span><span class="p">()</span>
            <span class="o">&amp;&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jibunAddress</span><span class="o">-&gt;</span><span class="na">isEqualTo</span><span class="p">(</span><span class="nv">$other</span><span class="o">-&gt;</span><span class="na">getJibunAddress</span><span class="p">())</span>
            <span class="o">&amp;&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">roadAddress</span><span class="o">-&gt;</span><span class="na">isEqualTo</span><span class="p">(</span><span class="nv">$other</span><span class="o">-&gt;</span><span class="na">getRoadAddress</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">toArray</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s1">'siDo'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">siDo</span><span class="p">,</span>
            <span class="s1">'siGuGu'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">siGunGu</span><span class="p">,</span>
            <span class="s1">'jibunAddress'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jibunAddress</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">(),</span>
            <span class="s1">'roadAddress'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">roadAddress</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">(),</span>
            <span class="s1">'detailAddress'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">detailAddress</span><span class="p">,</span>
        <span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// App/JibunAddress.php</span>

<span class="kn">namespace</span> <span class="nn">App</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">JibunAddress</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$adminDongName</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$legalDongName</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$legalRiName</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$isMountain</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$jibunNumber</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span>
        <span class="kt">string</span> <span class="nv">$adminDongName</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
        <span class="kt">string</span> <span class="nv">$legalDongName</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
        <span class="kt">string</span> <span class="nv">$legalRiName</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
        <span class="kt">bool</span> <span class="nv">$isMountain</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
        <span class="kt">string</span> <span class="nv">$jibunNumber</span> <span class="o">=</span> <span class="kc">null</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adminDongName</span> <span class="o">=</span> <span class="nv">$adminDongName</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">legalDongName</span> <span class="o">=</span> <span class="nv">$legalDongName</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">legalRiName</span> <span class="o">=</span> <span class="nv">$legalRiName</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">isMountain</span> <span class="o">=</span> <span class="nv">$isMountain</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jibunNumber</span> <span class="o">=</span> <span class="nv">$jibunNumber</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getAdminDongName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adminDongName</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getLegalDongName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">legalDongName</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getLegalRiName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">legalRiName</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">isMountain</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">isMountain</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getJibunNumber</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jibunNumber</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">isEqualTo</span><span class="p">(</span><span class="nx">JibunAddress</span> <span class="nv">$other</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adminDongName</span> <span class="o">===</span> <span class="nv">$other</span><span class="o">-&gt;</span><span class="na">getAdminDongName</span><span class="p">()</span>
            <span class="o">&amp;&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">legalDongName</span> <span class="o">===</span> <span class="nv">$other</span><span class="o">-&gt;</span><span class="na">getLegalDongName</span><span class="p">()</span>
            <span class="o">&amp;&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">legalRiName</span> <span class="o">===</span> <span class="nv">$other</span><span class="o">-&gt;</span><span class="na">getLegalRiName</span><span class="p">()</span>
            <span class="o">&amp;&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">isMountain</span> <span class="o">===</span> <span class="nv">$other</span><span class="o">-&gt;</span><span class="na">isMountain</span><span class="p">()</span>
            <span class="o">&amp;&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jibunNumber</span> <span class="o">===</span> <span class="nv">$other</span><span class="o">-&gt;</span><span class="na">getJibunNumber</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">toArray</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s1">'adminDongName'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adminDongName</span><span class="p">,</span>
            <span class="s1">'legalDongName'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">legalDongName</span><span class="p">,</span>
            <span class="s1">'legalRiName'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">legalRiName</span><span class="p">,</span>
            <span class="s1">'isMountain'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">isMountain</span><span class="p">,</span>
            <span class="s1">'jibunNumber'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jibunNumber</span><span class="p">,</span>
        <span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// App/RoadAddress.php</span>

<span class="kn">namespace</span> <span class="nn">App</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">RoadAddress</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$roadName</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$isBasement</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$buildingNumber</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span>
        <span class="kt">string</span> <span class="nv">$roadName</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
        <span class="kt">bool</span> <span class="nv">$isBasement</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
        <span class="kt">string</span> <span class="nv">$buildingNumber</span> <span class="o">=</span> <span class="kc">null</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">roadName</span> <span class="o">=</span> <span class="nv">$roadName</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">isBasement</span> <span class="o">=</span> <span class="nv">$isBasement</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">buildingNumber</span> <span class="o">=</span> <span class="nv">$buildingNumber</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getRoadName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">roadName</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">isBasement</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">isBasement</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getBuildingNumber</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">buildingNumber</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">isEqualTo</span><span class="p">(</span><span class="nx">RoadAddress</span> <span class="nv">$other</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">roadName</span> <span class="o">===</span> <span class="nv">$other</span><span class="o">-&gt;</span><span class="na">getRoadName</span><span class="p">()</span>
            <span class="o">&amp;&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">isBasement</span> <span class="o">===</span> <span class="nv">$other</span><span class="o">-&gt;</span><span class="na">isBasement</span><span class="p">()</span>
            <span class="o">&amp;&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">buildingNumber</span> <span class="o">===</span> <span class="nv">$other</span><span class="o">-&gt;</span><span class="na">getBuildingNumber</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">toArray</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s1">'roadName'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">roadName</span><span class="p">,</span>
            <span class="s1">'isBasement'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">isBasement</span><span class="p">,</span>
            <span class="s1">'buildingNumber'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">buildingNumber</span><span class="p">,</span>
        <span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="13-optional-ëª¨ë¸-íŒ©í† ë¦¬">1.3. [Optional] ëª¨ë¸ íŒ©í† ë¦¬</h3>

<p>í…ŒìŠ¤íŠ¸ í¸ì˜ë¥¼ ìœ„í•´ ëª¨ë¸ íŒ©í† ë¦¬ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="c1">// database/factories/CustomerFactory.php</span>

<span class="kn">use</span> <span class="nn">Faker\Generator</span> <span class="k">as</span> <span class="n">Faker</span><span class="p">;</span>

<span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">define</span><span class="p">(</span><span class="nx">App\Customer</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Faker</span> <span class="nv">$faker</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="nv">$faker</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">,</span>
        <span class="s1">'address'</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">\App\Address</span><span class="p">(</span>
            <span class="s1">'ì„œìš¸íŠ¹ë³„ì‹œ'</span><span class="p">,</span>
            <span class="s1">'ê°•ë‚¨êµ¬'</span><span class="p">,</span>
            <span class="k">new</span> <span class="nx">\App\JibunAddress</span><span class="p">(</span>
                <span class="s1">'ì‚¼ì„±1ë™'</span><span class="p">,</span>
                <span class="s1">'ì‚¼ì„±ë™'</span><span class="p">,</span>
                <span class="kc">null</span><span class="p">,</span>
                <span class="kc">false</span><span class="p">,</span>
                <span class="s1">'162-17'</span>
            <span class="p">),</span>
            <span class="k">new</span> <span class="nx">\App\RoadAddress</span><span class="p">(</span>
                <span class="s1">'ë´‰ì€ì‚¬ë¡œ112ê¸¸'</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>
                <span class="s1">'6'</span>
            <span class="p">),</span>
            <span class="s1">'ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„'</span>
        <span class="p">),</span>
    <span class="p">];</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="14-í…ŒìŠ¤íŠ¸">1.4. í…ŒìŠ¤íŠ¸</h3>

<p>í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ë‚˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ, íŒ…ì»¤ ì½˜ì†”ì„ ì´ìš©í•´ì„œ ì—”í‹°í‹°ì™€ ê°’ ê°ì²´ê°€ ì˜ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•´ë´…ë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>php artisan tinker
<span class="c"># ì—”í‹°í‹° ìƒì„± ë° ì˜ì†í™”</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span> <span class="o">=</span> factory<span class="o">(</span>App<span class="se">\C</span>ustomer::class<span class="o">)</span>-&gt;create<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> App<span class="se">\C</span>ustomer <span class="o">{</span><span class="c">#2963</span>
     name: <span class="s2">"Ted Muller"</span>,
     updated_at: <span class="s2">"2019-02-07 12:58:01"</span>,
     created_at: <span class="s2">"2019-02-07 12:58:01"</span>,
     <span class="nb">id</span>: 1,
   <span class="o">}</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c2</span> <span class="o">=</span> factory<span class="o">(</span>App<span class="se">\C</span>ustomer::class<span class="o">)</span>-&gt;create<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> App<span class="se">\C</span>ustomer <span class="o">{</span><span class="c">#2969</span>
     name: <span class="s2">"Dorris Bednar"</span>,
     updated_at: <span class="s2">"2019-02-07 12:58:16"</span>,
     created_at: <span class="s2">"2019-02-07 12:58:16"</span>,
     <span class="nb">id</span>: 2,
   <span class="o">}</span>

<span class="c"># ì—”í‹°í‹° ë° ê°’ ê°ì²´ì˜ í•„ë“œ ì ‘ê·¼</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address<span class="p">;</span>
<span class="o">=&gt;</span> App<span class="se">\A</span>ddress <span class="o">{</span><span class="c">#2968}</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address-&gt;getSiDo<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="s2">"ì„œìš¸íŠ¹ë³„ì‹œ"</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address-&gt;getJibunAddress<span class="o">()</span>-&gt;getJibunNumber<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="s2">"162-17"</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address-&gt;toArray<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="o">[</span>
     <span class="s2">"siDo"</span> <span class="o">=&gt;</span> <span class="s2">"ì„œìš¸íŠ¹ë³„ì‹œ"</span>,
     <span class="s2">"siGuGu"</span> <span class="o">=&gt;</span> <span class="s2">"ê°•ë‚¨êµ¬"</span>,
     <span class="s2">"jibunAddress"</span> <span class="o">=&gt;</span> <span class="o">[</span>
       <span class="s2">"adminDongName"</span> <span class="o">=&gt;</span> <span class="s2">"ì‚¼ì„±1ë™"</span>,
       <span class="s2">"legalDongName"</span> <span class="o">=&gt;</span> <span class="s2">"ì‚¼ì„±ë™"</span>,
       <span class="s2">"legalRiName"</span> <span class="o">=&gt;</span> null,
       <span class="s2">"isMountain"</span> <span class="o">=&gt;</span> <span class="nb">false</span>,
       <span class="s2">"jibunNumber"</span> <span class="o">=&gt;</span> <span class="s2">"162-17"</span>,
     <span class="o">]</span>,
     <span class="s2">"roadAddress"</span> <span class="o">=&gt;</span> <span class="o">[</span>
       <span class="s2">"roadName"</span> <span class="o">=&gt;</span> <span class="s2">"ë´‰ì€ì‚¬ë¡œ112ê¸¸"</span>,
       <span class="s2">"isBasement"</span> <span class="o">=&gt;</span> <span class="nb">false</span>,
       <span class="s2">"buildingNumber"</span> <span class="o">=&gt;</span> <span class="s2">"6"</span>,
     <span class="o">]</span>,
     <span class="s2">"detailAddress"</span> <span class="o">=&gt;</span> <span class="s2">"ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„"</span>,
   <span class="o">]</span>

<span class="c"># ê°’ ê°ì²´ì˜ ë™ë“± ë¹„êµ</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">$c1</span>-&gt;address-&gt;isEqualTo<span class="o">(</span><span class="nv">$c2</span>-&gt;address<span class="o">)</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="nb">true</span>

<span class="c"># ê°’ ê°ì²´ë¥¼ ì´ìš©í•œ ì½œë ‰ì…˜ í•„í„°ë§</span>
<span class="o">&gt;&gt;&gt;</span> App<span class="se">\C</span>ustomer::get<span class="o">()</span>-&gt;filter<span class="o">(</span><span class="k">function</span> <span class="o">(</span>App<span class="se">\C</span>ustomer <span class="nv">$c</span><span class="o">)</span> <span class="o">{</span>
...     <span class="k">return</span> <span class="nv">$c</span>-&gt;address-&gt;getSiDo<span class="o">()</span> <span class="o">===</span> <span class="s1">'ì„œìš¸íŠ¹ë³„ì‹œ'</span><span class="p">;</span>
... <span class="o">})</span>-&gt;toArray<span class="o">()</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="o">[</span>
     <span class="o">[</span>
       <span class="s2">"id"</span> <span class="o">=&gt;</span> 1,
       <span class="s2">"name"</span> <span class="o">=&gt;</span> <span class="s2">"Ted Muller"</span>,
       <span class="s2">"created_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 12:58:01"</span>,
       <span class="s2">"updated_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 12:58:01"</span>,
       <span class="s2">"address"</span> <span class="o">=&gt;</span> App<span class="se">\A</span>ddress <span class="o">{</span><span class="c">#2975},</span>
     <span class="o">]</span>,
     <span class="o">[</span>
       <span class="s2">"id"</span> <span class="o">=&gt;</span> 2,
       <span class="s2">"name"</span> <span class="o">=&gt;</span> <span class="s2">"Dorris Bednar"</span>,
       <span class="s2">"created_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 12:58:16"</span>,
       <span class="s2">"updated_at"</span> <span class="o">=&gt;</span> <span class="s2">"2019-02-07 12:58:16"</span>,
       <span class="s2">"address"</span> <span class="o">=&gt;</span> App<span class="se">\A</span>ddress <span class="o">{</span><span class="c">#2976},</span>
     <span class="o">]</span>,
   <span class="o">]</span>
</code></pre></div></div>

<p>DBì— ì˜ì†í™”ê°€ ì˜ ë˜ì—ˆë‚˜ ì¿¼ë¦¬í•´ë´…ë‹ˆë‹¤.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">customers</span><span class="p">;</span>
<span class="cm">/* SequelPro &gt; Bundle &gt; Copy &gt; Copy as JSON
{
    "data":
    [
        {
            "id": 1,
            "name": "Ted Muller",
            "addr_si_do_name": "ì„œìš¸íŠ¹ë³„ì‹œ",
            "addr_si_gun_gu_name": "ê°•ë‚¨êµ¬",
            "addr_admin_dong_name": "ì‚¼ì„±1ë™",
            "addr_legal_dong_name": "ì‚¼ì„±ë™",
            "addr_legal_ri_name": null,
            "addr_is_mountain": 0,
            "addr_jibun_number": "162-17",
            "addr_road_name": "ë´‰ì€ì‚¬ë¡œ112ê¸¸",
            "addr_is_basement": 0,
            "addr_building_number": "6",
            "addr_detail": "ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„",
            "created_at": "2019-02-07 12:58:01",
            "updated_at": "2019-02-07 12:58:01"
        },
        {
            "id": 2,
            "name": "Dorris Bednar",
            "addr_si_do_name": "ì„œìš¸íŠ¹ë³„ì‹œ",
            "addr_si_gun_gu_name": "ê°•ë‚¨êµ¬",
            "addr_admin_dong_name": "ì‚¼ì„±1ë™",
            "addr_legal_dong_name": "ì‚¼ì„±ë™",
            "addr_legal_ri_name": null,
            "addr_is_mountain": 0,
            "addr_jibun_number": "162-17",
            "addr_road_name": "ë´‰ì€ì‚¬ë¡œ112ê¸¸",
            "addr_is_basement": 0,
            "addr_building_number": "6",
            "addr_detail": "ìµì„±ë¹Œë”© 5ì¸µ ë©”ì‰¬ì½”ë¦¬ì•„",
            "created_at": "2019-02-07 12:58:16",
            "updated_at": "2019-02-07 12:58:16"
        }
    ]
}
*/</span>
</code></pre></div></div>

<!--more-->
<div class="spacer">â€¢ â€¢ â€¢</div>

<p>í¬ìŠ¤íŠ¸ê°€ ë„ˆë¬´ ê¸¸ì–´ì ¸ì„œ ì—¬ê¸°ì„œ ëŠê³ , ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œ ì´ì–´ì„œ ì“°ê² ìŠµë‹ˆë‹¤. í˜¹ì‹œ í¬ìŠ¤íŠ¸ë¥¼ ëª» ì“°ë”ë¼ë„ ì˜ˆì œ ì½”ë“œëŠ” ê¼­ ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.</p>

<ul>
  <li>ì €ì¥ì†Œ: <a href="https://github.com/appkr/eloquent-value-object">https://github.com/appkr/eloquent-value-object</a></li>
  <li>ë³€ê²½ìì™€ ì ‘ê·¼ì ë¸Œëœì¹˜: <a href="https://github.com/appkr/eloquent-value-object/tree/attr-accessor-mutator">https://github.com/appkr/eloquent-value-object/tree/attr-accessor-mutator</a></li>
</ul>

<p>ê° ì„¤ê³„ ë°©ì‹ì˜ íŠ¹ì§•ì„ ë¯¸ë¦¬ ì •ë¦¬í•´ë´…ë‹ˆë‹¤.</p>

<p><strong>ë³€ê²½ìì™€ ì ‘ê·¼ì</strong></p>
<ul>
  <li>ì»¬ëŸ¼ì´ ë‚˜ë‰˜ì–´ ìˆì–´ì„œ DBì—ì„œ ì¿¼ë¦¬í•˜ê¸° í¸í•˜ë‹¤</li>
  <li>ê°ì²´ì—ì„œ ì—¬ëŸ¬ ê°€ì§€ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ê¸° í¸ë¦¬í•˜ë‹¤</li>
  <li>ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ ë§ì´ ì¨ì•¼ í•œë‹¤</li>
</ul>

<p><strong>LOB</strong></p>
<ul>
  <li>ì»¬ëŸ¼ì´ ë‚˜ë‰˜ì–´ ìˆì§€ ì•Šì•„ì„œ, DB ìŠ¤í‚¤ë§ˆê°€ ê¹”ë”í•˜ë‹¤</li>
  <li>ìƒëŒ€ì ìœ¼ë¡œ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œì˜ ì–‘ì´ ì ë‹¤</li>
  <li>PHP ì§ë ¬í™” ë˜ëŠ” JSONìœ¼ë¡œ í•œ ì»¬ëŸ¼ì— ì €ì¥ë˜ë¯€ë¡œ ì¿¼ë¦¬í•˜ê¸° í˜ë“¤ë‹¤</li>
  <li>ì§ë ¬í™”ì˜ ëŒ€ìƒì´ë˜ëŠ” í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•  ë•Œ, ê³¼ê±°ì— ì§ë ¬í™”í•œ ë°ì´í„°ì— ëŒ€í•œ í˜¸í™˜ì„±ì„ ì£¼ì˜í•´ì•¼ í•œë‹¤</li>
</ul>

<p><strong>ì°¸ì¡°(ì™¸ë˜í‚¤)</strong></p>
<ul>
  <li>êµ¬í˜„ì´ ê°€ì¥ ì‰½ë‹¤</li>
  <li>ì¤‘ë³µ ë ˆì½”ë“œê°€ ë°œìƒí•œë‹¤</li>
  <li>ê°ì²´ì§€í–¥ìŠ¤ëŸ½ì§€ ì•Šë‹¤</li>
</ul>
:ET