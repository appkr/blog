<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="696px" preserveAspectRatio="none" style="width:944px;height:696px;" version="1.1" viewBox="0 0 944 696" width="944px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ef2tj2zf6lhh" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[975d7fda8cf98ff1a26ca528bf10cecf]
cluster App--><polygon fill="#FFFFFF" filter="url(#f1ef2tj2zf6lhh)" points="137,6,174,6,181,28.2969,375,28.2969,375,115,137,115,137,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="137" x2="181" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="141" y="20.9951">App</text><!--MD5=[fe136eabe4a7fd8dd15eb01473fe8855]
cluster Infra--><polygon fill="#FFFFFF" filter="url(#f1ef2tj2zf6lhh)" points="16,140,58,140,65,162.2969,460,162.2969,460,689,16,689,16,140" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="65" y1="162.2969" y2="162.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="20" y="154.9951">Infra</text><!--MD5=[c469a813eb166a3176a23fd967ed76a2]
cluster JWT--><polygon fill="#FFFFFF" filter="url(#f1ef2tj2zf6lhh)" points="475,452.5,510,452.5,517,474.7969,927,474.7969,927,548.5,475,548.5,475,452.5" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="475" x2="517" y1="474.7969" y2="474.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="479" y="467.4951">JWT</text><!--MD5=[5e062427d916d07a139f378e744dfaf2]
class TokenAuthenticate--><rect codeLine="3" fill="#FEFECE" filter="url(#f1ef2tj2zf6lhh)" height="73.6094" id="TokenAuthenticate" style="stroke:#A80036;stroke-width:1.5;" width="222" x="145" y="33"/><ellipse cx="192.25" cy="49" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M195.2188,54.6406 Q194.6406,54.9375 194,55.0781 Q193.3594,55.2344 192.6563,55.2344 Q190.1563,55.2344 188.8281,53.5938 Q187.5156,51.9375 187.5156,48.8125 Q187.5156,45.6875 188.8281,44.0313 Q190.1563,42.375 192.6563,42.375 Q193.3594,42.375 194,42.5313 Q194.6563,42.6875 195.2188,42.9844 L195.2188,45.7031 Q194.5938,45.125 194,44.8594 Q193.4063,44.5781 192.7813,44.5781 Q191.4375,44.5781 190.75,45.6563 Q190.0625,46.7188 190.0625,48.8125 Q190.0625,50.9063 190.75,51.9844 Q191.4375,53.0469 192.7813,53.0469 Q193.4063,53.0469 194,52.7813 Q194.5938,52.5 195.2188,51.9219 L195.2188,54.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="119" x="212.75" y="53.1543">TokenAuthenticate</text><line style="stroke:#A80036;stroke-width:1.5;" x1="146" x2="366" y1="65" y2="65"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="153" y="73"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="165" y="79.2104">tokenParser: TokenParser</text><line style="stroke:#A80036;stroke-width:1.5;" x1="146" x2="366" y1="85.8047" y2="85.8047"/><ellipse cx="156" cy="96.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="165" y="100.0151">handle(Request, Closure): Closure</text><!--MD5=[05faf57239ba6c251ba5120531eedbdd]
class TokenExtractor--><rect codeLine="12" fill="#FEFECE" filter="url(#f1ef2tj2zf6lhh)" height="60.8047" id="TokenExtractor" style="stroke:#A80036;stroke-width:1.5;" width="160" x="292" y="173.5"/><ellipse cx="321.85" cy="189.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M324.8188,195.1406 Q324.2406,195.4375 323.6,195.5781 Q322.9594,195.7344 322.2563,195.7344 Q319.7563,195.7344 318.4281,194.0938 Q317.1156,192.4375 317.1156,189.3125 Q317.1156,186.1875 318.4281,184.5313 Q319.7563,182.875 322.2563,182.875 Q322.9594,182.875 323.6,183.0313 Q324.2563,183.1875 324.8188,183.4844 L324.8188,186.2031 Q324.1938,185.625 323.6,185.3594 Q323.0063,185.0781 322.3813,185.0781 Q321.0375,185.0781 320.35,186.1563 Q319.6625,187.2188 319.6625,189.3125 Q319.6625,191.4063 320.35,192.4844 Q321.0375,193.5469 322.3813,193.5469 Q323.0063,193.5469 323.6,193.2813 Q324.1938,193 324.8188,192.4219 L324.8188,195.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="339.15" y="193.6543">TokenExtractor</text><line style="stroke:#A80036;stroke-width:1.5;" x1="293" x2="451" y1="205.5" y2="205.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="293" x2="451" y1="213.5" y2="213.5"/><ellipse cx="303" cy="224.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="134" x="312" y="227.7104">extract(Request): string</text><!--MD5=[e8c6607ff7297674dea7a73a5029dc3e]
class TokenParser--><rect codeLine="16" fill="#FEFECE" filter="url(#f1ef2tj2zf6lhh)" height="73.6094" id="TokenParser" style="stroke:#A80036;stroke-width:1.5;" width="233" x="23.5" y="167"/><ellipse cx="96.25" cy="183" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M99.2188,188.6406 Q98.6406,188.9375 98,189.0781 Q97.3594,189.2344 96.6563,189.2344 Q94.1563,189.2344 92.8281,187.5938 Q91.5156,185.9375 91.5156,182.8125 Q91.5156,179.6875 92.8281,178.0313 Q94.1563,176.375 96.6563,176.375 Q97.3594,176.375 98,176.5313 Q98.6563,176.6875 99.2188,176.9844 L99.2188,179.7031 Q98.5938,179.125 98,178.8594 Q97.4063,178.5781 96.7813,178.5781 Q95.4375,178.5781 94.75,179.6563 Q94.0625,180.7188 94.0625,182.8125 Q94.0625,184.9063 94.75,185.9844 Q95.4375,187.0469 96.7813,187.0469 Q97.4063,187.0469 98,186.7813 Q98.5938,186.5 99.2188,185.9219 L99.2188,188.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79" x="116.75" y="187.1543">TokenParser</text><line style="stroke:#A80036;stroke-width:1.5;" x1="24.5" x2="255.5" y1="199" y2="199"/><ellipse cx="34.5" cy="210" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="207" x="43.5" y="213.2104">tokenKeyProvider: TokenKeyProvider</text><line style="stroke:#A80036;stroke-width:1.5;" x1="24.5" x2="255.5" y1="219.8047" y2="219.8047"/><ellipse cx="34.5" cy="230.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="43.5" y="234.0151">parse(jwtString: string): Token</text><!--MD5=[d8c8cfd5ca149094f5b67f9f607a5ec7]
class Token--><rect codeLine="21" fill="#FEFECE" filter="url(#f1ef2tj2zf6lhh)" height="112.0234" id="Token" style="stroke:#A80036;stroke-width:1.5;" width="132" x="301" y="301"/><ellipse cx="343.9" cy="317" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M346.8688,322.6406 Q346.2906,322.9375 345.65,323.0781 Q345.0094,323.2344 344.3063,323.2344 Q341.8063,323.2344 340.4781,321.5938 Q339.1656,319.9375 339.1656,316.8125 Q339.1656,313.6875 340.4781,312.0313 Q341.8063,310.375 344.3063,310.375 Q345.0094,310.375 345.65,310.5313 Q346.3063,310.6875 346.8688,310.9844 L346.8688,313.7031 Q346.2438,313.125 345.65,312.8594 Q345.0563,312.5781 344.4313,312.5781 Q343.0875,312.5781 342.4,313.6563 Q341.7125,314.7188 341.7125,316.8125 Q341.7125,318.9063 342.4,319.9844 Q343.0875,321.0469 344.4313,321.0469 Q345.0563,321.0469 345.65,320.7813 Q346.2438,320.5 346.8688,319.9219 L346.8688,322.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="38" x="364.1" y="321.1543">Token</text><line style="stroke:#A80036;stroke-width:1.5;" x1="302" x2="432" y1="333" y2="333"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="341"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="321" y="347.2104">tokenString: string</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="353.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="321" y="360.0151">userName: UUID</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="366.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="321" y="372.8198">exp: Carbon</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="379.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="321" y="385.6245">iat: Carbon</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="392.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="321" y="398.4292">jti: string</text><line style="stroke:#A80036;stroke-width:1.5;" x1="302" x2="432" y1="405.0234" y2="405.0234"/><!--MD5=[94e464641f6965aac952d192b8d8ea5f]
class TokenKeyProvider--><rect codeLine="29" fill="#FEFECE" filter="url(#f1ef2tj2zf6lhh)" height="60.8047" id="TokenKeyProvider" style="stroke:#A80036;stroke-width:1.5;" width="142" x="87" y="326.5"/><ellipse cx="102" cy="342.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M97.9219,338.2656 L97.9219,336.1094 L105.3125,336.1094 L105.3125,338.2656 L102.8438,338.2656 L102.8438,346.3438 L105.3125,346.3438 L105.3125,348.5 L97.9219,348.5 L97.9219,346.3438 L100.3906,346.3438 L100.3906,338.2656 L97.9219,338.2656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="110" x="116" y="346.6543">TokenKeyProvider</text><line style="stroke:#A80036;stroke-width:1.5;" x1="88" x2="228" y1="358.5" y2="358.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="88" x2="228" y1="366.5" y2="366.5"/><ellipse cx="98" cy="377.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="107" y="380.7104">getKey(): string</text><!--MD5=[ee4105ee7c177605f448938195291602]
class UaaTokenKeyProvider--><rect codeLine="33" fill="#FEFECE" filter="url(#f1ef2tj2zf6lhh)" height="73.6094" id="UaaTokenKeyProvider" style="stroke:#A80036;stroke-width:1.5;" width="167" x="23.5" y="473"/><ellipse cx="38.5" cy="489" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M41.4688,494.6406 Q40.8906,494.9375 40.25,495.0781 Q39.6094,495.2344 38.9063,495.2344 Q36.4063,495.2344 35.0781,493.5938 Q33.7656,491.9375 33.7656,488.8125 Q33.7656,485.6875 35.0781,484.0313 Q36.4063,482.375 38.9063,482.375 Q39.6094,482.375 40.25,482.5313 Q40.9063,482.6875 41.4688,482.9844 L41.4688,485.7031 Q40.8438,485.125 40.25,484.8594 Q39.6563,484.5781 39.0313,484.5781 Q37.6875,484.5781 37,485.6563 Q36.3125,486.7188 36.3125,488.8125 Q36.3125,490.9063 37,491.9844 Q37.6875,493.0469 39.0313,493.0469 Q39.6563,493.0469 40.25,492.7813 Q40.8438,492.5 41.4688,491.9219 L41.4688,494.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="135" x="52.5" y="493.1543">UaaTokenKeyProvider</text><line style="stroke:#A80036;stroke-width:1.5;" x1="24.5" x2="189.5" y1="505" y2="505"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="31.5" y="513"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="43.5" y="519.2104">httpClient: GuzzleClient</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="31.5" y="525.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="43.5" y="532.0151">config: string[]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="24.5" x2="189.5" y1="538.6094" y2="538.6094"/><!--MD5=[dbfcd7e43ccb46c6cac5dba3915d61d1]
class CacheableTokenKeyProvider--><rect codeLine="38" fill="#FEFECE" filter="url(#f1ef2tj2zf6lhh)" height="73.6094" id="CacheableTokenKeyProvider" style="stroke:#A80036;stroke-width:1.5;" width="222" x="225" y="473"/><ellipse cx="246.3" cy="489" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M249.2688,494.6406 Q248.6906,494.9375 248.05,495.0781 Q247.4094,495.2344 246.7063,495.2344 Q244.2063,495.2344 242.8781,493.5938 Q241.5656,491.9375 241.5656,488.8125 Q241.5656,485.6875 242.8781,484.0313 Q244.2063,482.375 246.7063,482.375 Q247.4094,482.375 248.05,482.5313 Q248.7063,482.6875 249.2688,482.9844 L249.2688,485.7031 Q248.6438,485.125 248.05,484.8594 Q247.4563,484.5781 246.8313,484.5781 Q245.4875,484.5781 244.8,485.6563 Q244.1125,486.7188 244.1125,488.8125 Q244.1125,490.9063 244.8,491.9844 Q245.4875,493.0469 246.8313,493.0469 Q247.4563,493.0469 248.05,492.7813 Q248.6438,492.5 249.2688,491.9219 L249.2688,494.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="176" x="261.7" y="493.1543">CacheableTokenKeyProvider</text><line style="stroke:#A80036;stroke-width:1.5;" x1="226" x2="446" y1="505" y2="505"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="233" y="513"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="245" y="519.2104">delegate: TokenKeyProvider</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="233" y="525.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="245" y="532.0151">cacheRepository: CacheRepository</text><line style="stroke:#A80036;stroke-width:1.5;" x1="226" x2="446" y1="538.6094" y2="538.6094"/><!--MD5=[1481cde22367a11d751436d1069c7b0c]
class TokenKeyResponse--><rect codeLine="43" fill="#FEFECE" filter="url(#f1ef2tj2zf6lhh)" height="73.6094" id="TokenKeyResponse" style="stroke:#A80036;stroke-width:1.5;" width="153" x="144.5" y="607"/><ellipse cx="159.5" cy="623" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M162.4688,628.6406 Q161.8906,628.9375 161.25,629.0781 Q160.6094,629.2344 159.9063,629.2344 Q157.4063,629.2344 156.0781,627.5938 Q154.7656,625.9375 154.7656,622.8125 Q154.7656,619.6875 156.0781,618.0313 Q157.4063,616.375 159.9063,616.375 Q160.6094,616.375 161.25,616.5313 Q161.9063,616.6875 162.4688,616.9844 L162.4688,619.7031 Q161.8438,619.125 161.25,618.8594 Q160.6563,618.5781 160.0313,618.5781 Q158.6875,618.5781 158,619.6563 Q157.3125,620.7188 157.3125,622.8125 Q157.3125,624.9063 158,625.9844 Q158.6875,627.0469 160.0313,627.0469 Q160.6563,627.0469 161.25,626.7813 Q161.8438,626.5 162.4688,625.9219 L162.4688,628.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="173.5" y="627.1543">TokenKeyResponse</text><line style="stroke:#A80036;stroke-width:1.5;" x1="145.5" x2="296.5" y1="639" y2="639"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="152.5" y="647"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="164.5" y="653.2104">alg: string</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="152.5" y="659.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="60" x="164.5" y="666.0151">key: string</text><line style="stroke:#A80036;stroke-width:1.5;" x1="145.5" x2="296.5" y1="672.6094" y2="672.6094"/><!--MD5=[b0cc3306da098485778c40d809dbd8d3]
class JWT--><rect codeLine="52" fill="#FEFECE" filter="url(#f1ef2tj2zf6lhh)" height="60.8047" id="JWT" style="stroke:#A80036;stroke-width:1.5;" width="437" x="482.5" y="479.5"/><ellipse cx="686.25" cy="495.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M689.2188,501.1406 Q688.6406,501.4375 688,501.5781 Q687.3594,501.7344 686.6563,501.7344 Q684.1563,501.7344 682.8281,500.0938 Q681.5156,498.4375 681.5156,495.3125 Q681.5156,492.1875 682.8281,490.5313 Q684.1563,488.875 686.6563,488.875 Q687.3594,488.875 688,489.0313 Q688.6563,489.1875 689.2188,489.4844 L689.2188,492.2031 Q688.5938,491.625 688,491.3594 Q687.4063,491.0781 686.7813,491.0781 Q685.4375,491.0781 684.75,492.1563 Q684.0625,493.2188 684.0625,495.3125 Q684.0625,497.4063 684.75,498.4844 Q685.4375,499.5469 686.7813,499.5469 Q687.4063,499.5469 688,499.2813 Q688.5938,499 689.2188,498.4219 L689.2188,501.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="21" x="706.75" y="499.6543">JWT</text><line style="stroke:#A80036;stroke-width:1.5;" x1="483.5" x2="918.5" y1="511.5" y2="511.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="483.5" x2="918.5" y1="519.5" y2="519.5"/><ellipse cx="493.5" cy="530.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="411" x="502.5" y="533.7104">decode(jwtString: string, publicKey: string, algorithm: string[]): stdClass</text><!--MD5=[3793ec3869c376ac1d00f6b7651ac0a9]
reverse link TokenKeyProvider to UaaTokenKeyProvider--><path d="M141.4554,406.6337 C134.2631,428.2106 125.9821,453.0538 119.3411,472.9767 " fill="none" id="TokenKeyProvider-backto-UaaTokenKeyProvider" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="134.8366,404.3542,147.802,387.5941,148.1181,408.7814,134.8366,404.3542" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[c6ecfe0e3dbce35158e1bddb6919d043]
reverse link TokenKeyProvider to CacheableTokenKeyProvider--><path d="M197.9523,401.3929 C222.7873,424.1006 254.7671,451.4191 281.8251,472.9767 " fill="none" id="TokenKeyProvider-backto-CacheableTokenKeyProvider" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="193.0079,406.3535,183.1546,387.5941,202.5558,396.1144,193.0079,406.3535" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1d1dd3b223cdd7886a9e2bb64ad17558]
link CacheableTokenKeyProvider to TokenKeyProvider--><path codeLine="64" d="M304.6823,472.9767 C277.9926,447.9454 239.7249,415.1469 208.7693,390.8183 " fill="none" id="CacheableTokenKeyProvider-to-TokenKeyProvider" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="204.6457,387.5941,209.2719,396.2888,208.5846,390.6739,214.1995,389.9866,204.6457,387.5941" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[917e08f084f3e366dd5cc2f80aa29c29]
link TokenAuthenticate to TokenExtractor--><path codeLine="58" d="M288.3125,107.3265 C305.0154,126.6212 325.2801,150.0305 341.6846,168.9805 " fill="none" id="TokenAuthenticate-to-TokenExtractor" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="345.3372,173.1999,342.471,163.7773,342.0647,169.4196,336.4225,169.0133,345.3372,173.1999" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[dd2ac602da1cf8ae692aa4b5faaa8e1e]
link TokenAuthenticate to TokenParser--><path codeLine="59" d="M223.6875,107.3265 C208.7297,124.6054 190.9154,145.1839 175.575,162.9047 " fill="none" id="TokenAuthenticate-to-TokenParser" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="172.1392,166.8737,181.054,162.6873,175.4118,163.0934,175.0056,157.4512,172.1392,166.8737" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ae8670239b4ceccd60e9077c2fd35227]
link TokenParser to TokenKeyProvider--><path codeLine="60" d="M144.3573,241.037 C147.2325,265.4766 150.9783,297.3159 153.8174,321.4477 " fill="none" id="TokenParser-to-TokenKeyProvider" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="154.4088,326.4747,157.3297,317.0689,153.8245,321.509,149.3845,318.0038,154.4088,326.4747" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[dd874fe2e0a47afc9938ecfcc9f73d31]
link TokenParser to Token--><path codeLine="61" d="M194.9504,241.037 C225.4652,261.6043 263.7553,287.4122 296.4618,309.4566 " fill="none" id="TokenParser-to-Token" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="300.8322,312.4023,295.6048,304.0552,296.6861,309.6077,291.1335,310.689,300.8322,312.4023" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[5bd72aac886f88a8080788ce4ac22530]
link Token to JWT--><path codeLine="62" d="M433.387,387.4108 C490.0096,413.3487 571.2346,450.5566 629.3243,477.1665 " fill="none" id="Token-to-JWT" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="634.1675,479.3851,627.6512,472.0002,629.6218,477.3027,624.3193,479.2733,634.1675,479.3851" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0014c0074c97e765a7833bb1ec03177e]
link UaaTokenKeyProvider to TokenKeyResponse--><path codeLine="63" d="M138.7554,547.3265 C153.4553,564.6054 170.9624,585.1839 186.0383,602.9047 " fill="none" id="UaaTokenKeyProvider-to-TokenKeyResponse" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="189.4149,606.8737,186.6296,597.4269,186.1749,603.0655,180.5364,602.6108,189.4149,606.8737" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0db04825c617e6e91e2bf1df7905bd8c]
link CacheableTokenKeyProvider to TokenKeyResponse--><path codeLine="65" d="M303.9661,547.3265 C289.1372,564.6054 271.4765,585.1839 256.2683,602.9047 " fill="none" id="CacheableTokenKeyProvider-to-TokenKeyResponse" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="252.8621,606.8737,261.7588,602.649,256.1184,603.0794,255.688,597.439,252.8621,606.8737" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ffa3877f3f810e5af1d39c215b0fd7f4]
@startuml
package App {

  class TokenAuthenticate {
    - tokenParser: TokenParser
    + handle(Request, Closure): Closure
  }
  
}

package Infra {

  class TokenExtractor {
    + {static} extract(Request): string
  }
  
  class TokenParser {
    + tokenKeyProvider: TokenKeyProvider
    + parse(jwtString: string): Token
  }
  
  class Token {
    - tokenString: string
    - userName: UUID
    - exp: Carbon
    - iat: Carbon
    - jti: string
  }
  
  interface TokenKeyProvider {
    + getKey(): string
  }
  
  class UaaTokenKeyProvider implements TokenKeyProvider {
    - httpClient: GuzzleClient
    - config: string[]
  }
  
  class CacheableTokenKeyProvider implements TokenKeyProvider {
    - delegate: TokenKeyProvider
    - cacheRepository: CacheRepository
  }
  
  class TokenKeyResponse {
    - alg: string
    - key: string
  }
  
}

package JWT {
  
  class JWT {
    + decode(jwtString: string, publicKey: string, algorithm: string[]): stdClass
  }
  
}

TokenAuthenticate - -> TokenExtractor
TokenAuthenticate - -> TokenParser
TokenParser - -> TokenKeyProvider
TokenParser - -> Token
Token - -> JWT
UaaTokenKeyProvider - -> TokenKeyResponse
CacheableTokenKeyProvider - -> TokenKeyProvider 
CacheableTokenKeyProvider - -> TokenKeyResponse
@enduml

PlantUML version 1.2020.22(Sun Dec 06 09:36:27 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>