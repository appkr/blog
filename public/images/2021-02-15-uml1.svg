<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="549px" preserveAspectRatio="none" style="width:604px;height:549px;" version="1.1" viewBox="0 0 604 549" width="604px" zoomAndPan="magnify"><defs><filter height="300%" id="f1jb0ua5bpw7u3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[975d7fda8cf98ff1a26ca528bf10cecf]
cluster App--><polygon fill="#FFFFFF" filter="url(#f1jb0ua5bpw7u3)" points="248,6,285,6,292,28.2969,486,28.2969,486,115,248,115,248,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="248" x2="292" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="252" y="20.9951">App</text><!--MD5=[fe136eabe4a7fd8dd15eb01473fe8855]
cluster Infra--><polygon fill="#FFFFFF" filter="url(#f1jb0ua5bpw7u3)" points="143,140,185,140,192,162.2969,587,162.2969,587,421,143,421,143,140" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="143" x2="192" y1="162.2969" y2="162.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="147" y="154.9951">Infra</text><!--MD5=[c469a813eb166a3176a23fd967ed76a2]
cluster JWT--><polygon fill="#FFFFFF" filter="url(#f1jb0ua5bpw7u3)" points="16,446,51,446,58,468.2969,468,468.2969,468,542,16,542,16,446" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="58" y1="468.2969" y2="468.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="20" y="460.9951">JWT</text><!--MD5=[5e062427d916d07a139f378e744dfaf2]
class TokenAuthenticate--><rect codeLine="3" fill="#FEFECE" filter="url(#f1jb0ua5bpw7u3)" height="73.6094" id="TokenAuthenticate" style="stroke:#A80036;stroke-width:1.5;" width="222" x="256" y="33"/><ellipse cx="303.25" cy="49" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M306.2188,54.6406 Q305.6406,54.9375 305,55.0781 Q304.3594,55.2344 303.6563,55.2344 Q301.1563,55.2344 299.8281,53.5938 Q298.5156,51.9375 298.5156,48.8125 Q298.5156,45.6875 299.8281,44.0313 Q301.1563,42.375 303.6563,42.375 Q304.3594,42.375 305,42.5313 Q305.6563,42.6875 306.2188,42.9844 L306.2188,45.7031 Q305.5938,45.125 305,44.8594 Q304.4063,44.5781 303.7813,44.5781 Q302.4375,44.5781 301.75,45.6563 Q301.0625,46.7188 301.0625,48.8125 Q301.0625,50.9063 301.75,51.9844 Q302.4375,53.0469 303.7813,53.0469 Q304.4063,53.0469 305,52.7813 Q305.5938,52.5 306.2188,51.9219 L306.2188,54.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="119" x="323.75" y="53.1543">TokenAuthenticate</text><line style="stroke:#A80036;stroke-width:1.5;" x1="257" x2="477" y1="65" y2="65"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="264" y="73"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="276" y="79.2104">tokenParser: TokenParser</text><line style="stroke:#A80036;stroke-width:1.5;" x1="257" x2="477" y1="85.8047" y2="85.8047"/><ellipse cx="267" cy="96.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="276" y="100.0151">handle(Request, Closure): Closure</text><!--MD5=[05faf57239ba6c251ba5120531eedbdd]
class TokenExtractor--><rect codeLine="12" fill="#FEFECE" filter="url(#f1jb0ua5bpw7u3)" height="60.8047" id="TokenExtractor" style="stroke:#A80036;stroke-width:1.5;" width="160" x="419" y="173.5"/><ellipse cx="448.85" cy="189.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M451.8188,195.1406 Q451.2406,195.4375 450.6,195.5781 Q449.9594,195.7344 449.2563,195.7344 Q446.7563,195.7344 445.4281,194.0938 Q444.1156,192.4375 444.1156,189.3125 Q444.1156,186.1875 445.4281,184.5313 Q446.7563,182.875 449.2563,182.875 Q449.9594,182.875 450.6,183.0313 Q451.2563,183.1875 451.8188,183.4844 L451.8188,186.2031 Q451.1938,185.625 450.6,185.3594 Q450.0063,185.0781 449.3813,185.0781 Q448.0375,185.0781 447.35,186.1563 Q446.6625,187.2188 446.6625,189.3125 Q446.6625,191.4063 447.35,192.4844 Q448.0375,193.5469 449.3813,193.5469 Q450.0063,193.5469 450.6,193.2813 Q451.1938,193 451.8188,192.4219 L451.8188,195.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="466.15" y="193.6543">TokenExtractor</text><line style="stroke:#A80036;stroke-width:1.5;" x1="420" x2="578" y1="205.5" y2="205.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="420" x2="578" y1="213.5" y2="213.5"/><ellipse cx="430" cy="224.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="134" x="439" y="227.7104">extract(Request): string</text><!--MD5=[e8c6607ff7297674dea7a73a5029dc3e]
class TokenParser--><rect codeLine="16" fill="#FEFECE" filter="url(#f1jb0ua5bpw7u3)" height="73.6094" id="TokenParser" style="stroke:#A80036;stroke-width:1.5;" width="233" x="150.5" y="167"/><ellipse cx="223.25" cy="183" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M226.2188,188.6406 Q225.6406,188.9375 225,189.0781 Q224.3594,189.2344 223.6563,189.2344 Q221.1563,189.2344 219.8281,187.5938 Q218.5156,185.9375 218.5156,182.8125 Q218.5156,179.6875 219.8281,178.0313 Q221.1563,176.375 223.6563,176.375 Q224.3594,176.375 225,176.5313 Q225.6563,176.6875 226.2188,176.9844 L226.2188,179.7031 Q225.5938,179.125 225,178.8594 Q224.4063,178.5781 223.7813,178.5781 Q222.4375,178.5781 221.75,179.6563 Q221.0625,180.7188 221.0625,182.8125 Q221.0625,184.9063 221.75,185.9844 Q222.4375,187.0469 223.7813,187.0469 Q224.4063,187.0469 225,186.7813 Q225.5938,186.5 226.2188,185.9219 L226.2188,188.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79" x="243.75" y="187.1543">TokenParser</text><line style="stroke:#A80036;stroke-width:1.5;" x1="151.5" x2="382.5" y1="199" y2="199"/><ellipse cx="161.5" cy="210" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="207" x="170.5" y="213.2104">tokenKeyProvider: TokenKeyProvider</text><line style="stroke:#A80036;stroke-width:1.5;" x1="151.5" x2="382.5" y1="219.8047" y2="219.8047"/><ellipse cx="161.5" cy="230.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="170.5" y="234.0151">parse(jwtString: string): Token</text><!--MD5=[d8c8cfd5ca149094f5b67f9f607a5ec7]
class Token--><rect codeLine="21" fill="#FEFECE" filter="url(#f1jb0ua5bpw7u3)" height="112.0234" id="Token" style="stroke:#A80036;stroke-width:1.5;" width="132" x="176" y="301"/><ellipse cx="218.9" cy="317" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M221.8688,322.6406 Q221.2906,322.9375 220.65,323.0781 Q220.0094,323.2344 219.3063,323.2344 Q216.8063,323.2344 215.4781,321.5938 Q214.1656,319.9375 214.1656,316.8125 Q214.1656,313.6875 215.4781,312.0313 Q216.8063,310.375 219.3063,310.375 Q220.0094,310.375 220.65,310.5313 Q221.3063,310.6875 221.8688,310.9844 L221.8688,313.7031 Q221.2438,313.125 220.65,312.8594 Q220.0563,312.5781 219.4313,312.5781 Q218.0875,312.5781 217.4,313.6563 Q216.7125,314.7188 216.7125,316.8125 Q216.7125,318.9063 217.4,319.9844 Q218.0875,321.0469 219.4313,321.0469 Q220.0563,321.0469 220.65,320.7813 Q221.2438,320.5 221.8688,319.9219 L221.8688,322.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="38" x="239.1" y="321.1543">Token</text><line style="stroke:#A80036;stroke-width:1.5;" x1="177" x2="307" y1="333" y2="333"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="184" y="341"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="196" y="347.2104">tokenString: string</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="184" y="353.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="196" y="360.0151">userName: UUID</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="184" y="366.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="196" y="372.8198">exp: Carbon</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="184" y="379.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="196" y="385.6245">iat: Carbon</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="184" y="392.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="196" y="398.4292">jti: string</text><line style="stroke:#A80036;stroke-width:1.5;" x1="177" x2="307" y1="405.0234" y2="405.0234"/><!--MD5=[94e464641f6965aac952d192b8d8ea5f]
class TokenKeyProvider--><rect codeLine="29" fill="#FEFECE" filter="url(#f1jb0ua5bpw7u3)" height="60.8047" id="TokenKeyProvider" style="stroke:#A80036;stroke-width:1.5;" width="142" x="343" y="326.5"/><ellipse cx="358" cy="342.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M353.9219,338.2656 L353.9219,336.1094 L361.3125,336.1094 L361.3125,338.2656 L358.8438,338.2656 L358.8438,346.3438 L361.3125,346.3438 L361.3125,348.5 L353.9219,348.5 L353.9219,346.3438 L356.3906,346.3438 L356.3906,338.2656 L353.9219,338.2656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="110" x="372" y="346.6543">TokenKeyProvider</text><line style="stroke:#A80036;stroke-width:1.5;" x1="344" x2="484" y1="358.5" y2="358.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="344" x2="484" y1="366.5" y2="366.5"/><ellipse cx="354" cy="377.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="363" y="380.7104">getKey(): string</text><!--MD5=[b0cc3306da098485778c40d809dbd8d3]
class JWT--><rect codeLine="37" fill="#FEFECE" filter="url(#f1jb0ua5bpw7u3)" height="60.8047" id="JWT" style="stroke:#A80036;stroke-width:1.5;" width="437" x="23.5" y="473"/><ellipse cx="227.25" cy="489" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M230.2188,494.6406 Q229.6406,494.9375 229,495.0781 Q228.3594,495.2344 227.6563,495.2344 Q225.1563,495.2344 223.8281,493.5938 Q222.5156,491.9375 222.5156,488.8125 Q222.5156,485.6875 223.8281,484.0313 Q225.1563,482.375 227.6563,482.375 Q228.3594,482.375 229,482.5313 Q229.6563,482.6875 230.2188,482.9844 L230.2188,485.7031 Q229.5938,485.125 229,484.8594 Q228.4063,484.5781 227.7813,484.5781 Q226.4375,484.5781 225.75,485.6563 Q225.0625,486.7188 225.0625,488.8125 Q225.0625,490.9063 225.75,491.9844 Q226.4375,493.0469 227.7813,493.0469 Q228.4063,493.0469 229,492.7813 Q229.5938,492.5 230.2188,491.9219 L230.2188,494.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="21" x="247.75" y="493.1543">JWT</text><line style="stroke:#A80036;stroke-width:1.5;" x1="24.5" x2="459.5" y1="505" y2="505"/><line style="stroke:#A80036;stroke-width:1.5;" x1="24.5" x2="459.5" y1="513" y2="513"/><ellipse cx="34.5" cy="524" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="411" x="43.5" y="527.2104">decode(jwtString: string, publicKey: string, algorithm: string[]): stdClass</text><!--MD5=[917e08f084f3e366dd5cc2f80aa29c29]
link TokenAuthenticate to TokenExtractor--><path codeLine="43" d="M403.7694,107.3265 C422.9359,126.7834 446.2239,150.4242 464.9729,169.4573 " fill="none" id="TokenAuthenticate-to-TokenExtractor" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="468.6596,173.1999,465.1931,163.9813,465.1507,169.638,459.494,169.5956,468.6596,173.1999" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[dd2ac602da1cf8ae692aa4b5faaa8e1e]
link TokenAuthenticate to TokenParser--><path codeLine="44" d="M339.1444,107.3265 C326.3581,124.4602 311.1505,144.8383 298.002,162.4574 " fill="none" id="TokenAuthenticate-to-TokenParser" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="294.7062,166.8737,303.2946,162.053,297.6966,162.8665,296.8831,157.2684,294.7062,166.8737" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ae8670239b4ceccd60e9077c2fd35227]
link TokenParser to TokenKeyProvider--><path codeLine="45" d="M302.5846,241.037 C326.4587,265.8856 357.6824,298.3837 380.9997,322.6527 " fill="none" id="TokenParser-to-TokenKeyProvider" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="384.6717,326.4747,381.3207,317.2134,381.2076,322.8692,375.5519,322.756,384.6717,326.4747" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[dd874fe2e0a47afc9938ecfcc9f73d31]
link TokenParser to Token--><path codeLine="46" d="M260.9482,241.037 C258.2668,257.4473 255.0402,277.1939 252.0158,295.7031 " fill="none" id="TokenParser-to-Token" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="251.1688,300.8871,256.5678,292.6499,251.9751,295.9525,248.6725,291.3599,251.1688,300.8871" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[5bd72aac886f88a8080788ce4ac22530]
link Token to JWT--><path codeLine="47" d="M242,413.2217 C242,431.3457 242,450.942 242,467.2309 " fill="none" id="Token-to-JWT" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="242,472.6213,246,463.6213,242,467.6213,238,463.6213,242,472.6213" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[dd0b4743984d9fc4a8db45fae59f84c9]
@startuml
package App {

  class TokenAuthenticate {
    - tokenParser: TokenParser
    + handle(Request, Closure): Closure
  }
  
}

package Infra {

  class TokenExtractor {
    + {static} extract(Request): string
  }
  
  class TokenParser {
    + tokenKeyProvider: TokenKeyProvider
    + parse(jwtString: string): Token
  }
  
  class Token {
    - tokenString: string
    - userName: UUID
    - exp: Carbon
    - iat: Carbon
    - jti: string
  }
  
  interface TokenKeyProvider {
    + getKey(): string
  }
  
}

package JWT {
  
  class JWT {
    + decode(jwtString: string, publicKey: string, algorithm: string[]): stdClass
  }
  
}

TokenAuthenticate - -> TokenExtractor
TokenAuthenticate - -> TokenParser
TokenParser - -> TokenKeyProvider
TokenParser - -> Token
Token - -> JWT
@enduml

PlantUML version 1.2020.22(Sun Dec 06 09:36:27 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>