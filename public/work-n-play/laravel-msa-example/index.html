<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>

  <meta name="description" content="모노리틱monolithic 서비스 구조에서 마이크로 서비스 구조로 전환할 때 가장 먼저 고려해야할 모듈은 사용자 인증입니다, 아래 그림처럼 말이죠.모노리틱 서비스 구조마이크로 서비스 구조이 포스트에서는 라라벨 프레임워크로 마이크로 서비스를 만들때 UAAUser Account and..."/>
  <meta name="google-site-verification" content="K08vxFtrUM8f7VcQr6MPRFuI7ub1QHanrPFjsKKPV2s" />
  <meta name="naver-site-verification" content="1154945df3baf6485909c67f4dbc47a19988736d"/>

  <meta name="msapplication-tap-highlight" content="no"/>

  <!-- Facebook Meta -->
  <meta property="og:title" content="라라벨 마이크로서비스 예제"/>
  <meta property="og:type" content="Website"/>
  <meta property="og:author" content="appkr (juwonkim@me.com)"/>
  <meta property="og:image" content="/images/2021-02-13-microservice.png"/>

  <!-- Google+ Meta -->
  <meta itemprop="name" content="라라벨 마이크로서비스 예제">
  <meta itemprop="description" content="모노리틱monolithic 서비스 구조에서 마이크로 서비스 구조로 전환할 때 가장 먼저 고려해야할 모듈은 사용자 인증입니다, 아래 그림처럼 말이죠.모노리틱 서비스 구조마이크로 서비스 구조이 포스트에서는 라라벨 프레임워크로 마이크로 서비스를 만들때 UAAUser Account and...">
  <meta itemprop="image" content="/images/2021-02-13-microservice.png">
  <meta itemprop="author" content="appkr (juwonkim@me.com)"/>

  <!-- Twitter Meta -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@appkrs" />
  <meta name="twitter:title" content="라라벨 마이크로서비스 예제" />
  <meta name="twitter:description" content="모노리틱monolithic 서비스 구조에서 마이크로 서비스 구조로 전환할 때 가장 먼저 고려해야할 모듈은 사용자 인증입니다, 아래 그림처럼 말이죠.모노리틱 서비스 구조마이크로 서비스 구조이 포스트에서는 라라벨 프레임워크로 마이크로 서비스를 만들때 UAAUser Account and..." />
  <meta name="twitter:image" content="/images/2021-02-13-microservice.png" />
  <meta name="twitter:domain" content="blog.appkr.dev">

  <!-- Mobile and Rss -->
  <link rel="canonical" href="https://blog.appkr.dev/work-n-play/laravel-msa-example/"/>
  <link rel="alternate" type="application/rss+xml" title="Appkr.memo(new Story())" href="https://blog.appkr.dev/feed.xml"/>

  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,400,500,700"/>
  <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/nanumgothic.css"/>
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons"/>

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.7/css/bootstrap-material-design.min.css"/>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.7/css/ripples.min.css"/>
  <link rel="stylesheet" href="/styles/main.css"/>

  <title>라라벨 마이크로서비스 예제 | Appkr.memo(new Story())</title>

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>

<body id="app">

  <nav class="navbar navbar-static-top" role="navigation">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
        <span class="sr-only">Navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">
        Appkr.memo(new Story())
      </a>
    </div>

    <div class="navbar-collapse collapse navbar-responsive-collapse">
      <ul class="nav navbar-nav navbar-right text-center">
        <li>
          <a href="/">Blog</a>
        </li>
        <li>
          <a href="/profile/">Profile</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <div class="container">
  <section id="main" class="col-md-9 minimal">
    <article class="box">
      <div class="box-header">
        <h2>
          <span class="title">라라벨 마이크로서비스 예제</span>
          <span class="action dropdown pull-right">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-target="#">
              <i class="material-icons">share</i>
            </a>

            <ul class="dropdown-menu">
              <li>
                <a href="https://www.facebook.com/sharer/sharer.php?u=https://blog.appkr.dev/work-n-play/laravel-msa-example/&title=라라벨 마이크로서비스 예제" id="sns-facebook">
                  Facebook
                </a>
              </li>
              <li>
                <a href="http://twitter.com/share?url=https://blog.appkr.dev/work-n-play/laravel-msa-example/&title=라라벨 마이크로서비스 예제&text=라라벨 마이크로서비스 예제" id="sns-twitter">
                  Twitter
                </a>
              </li>
            </ul>
          </span>
        </h2>

        <p class="box-meta">
          <span>
            <i class="material-icons">today</i>
            2021-02-13
          </span>
          <span>
            <i class="material-icons">face</i>
            Posted by appkr
          </span>
          <span>
            <i class="material-icons">turned_in</i>
            
              <a href="/categories#work-n-play">
                
                    Work & Play
                  
              </a>
              
            
          </span>
          <span>
            <i class="material-icons">forum</i>
            <a href="/work-n-play/laravel-msa-example/#disqus_thread" title="comments">0</a>
          </span>
        </p>
      </div>

      <div class="box-body">
        <p>모노리틱<small class="text-muted">monolithic</small> 서비스 구조에서 마이크로 서비스 구조로 전환할 때 가장 먼저 고려해야할 모듈은 사용자 인증입니다, 아래 그림처럼 말이죠.</p>

<p><img src="/images/2021-02-13-monolithic.svg" alt="" /></p>
<div class="text-center"><small>모노리틱 서비스 구조</small></div>

<p><img src="/images/2021-02-13-microservice.svg" alt="" /></p>
<div class="text-center"><small>마이크로 서비스 구조</small></div>

<p>이 포스트에서는 라라벨 프레임워크로 마이크로 서비스를 만들때 UAA<small class="text-muted">User Account and Authentication</small> 서버와 연동하는 사례를 설명합니다. 기존의 모노리틱 서비스를 마이크로 서비스로 이전하는 방법은 설명하지 않습니다. 그리고, UAA는 <a href="https://www.jhipster.tech/using-uaa/">JhipsterUAA</a>를 이용합니다; <a href="https://www.keycloak.org/">Keycloak</a>, <a href="https://laravel.com/docs/8.x/passport">Laravel Passport</a> 등의 OAuth2 서비스를 사용해도 유사한 방법으로 연동할 수 있습니다.</p>

<!--more-->
<div class="spacer">• • •</div>

<h2 id="1-큰-그림">1 큰 그림</h2>

<p><img src="/images/2021-02-13-microservice2.svg" alt="" /></p>
<div class="text-center"><small>마이크로 서비스 콤포넌트</small></div>

<h3 id="용어">용어</h3>

<ul>
  <li>인증 서버: OAuth2 서버와 같은 의미로 사용함</li>
  <li>리소스 서버: 마이크로 서비스와 같은 의미로 사용함</li>
  <li>리소스: REST 컨텍스트에서 도메인을 표현하는 방법</li>
</ul>

<h3 id="각-콤포넌트-설명">각 콤포넌트 설명</h3>

<h4 id="client">Client</h4>
<ul>
  <li>curl, postman, 웹/모바일 애플리케이션, 서버의 HTTP Client(e.g. Guzzle, RestTemplate)</li>
</ul>

<h4 id="uaa">UAA</h4>
<ul>
  <li><a href="https://www.jhipster.tech/using-uaa/">JhipsterUAA</a></li>
  <li>Port 9999</li>
  <li>단순함을 위해 <code class="language-plaintext highlighter-rouge">Client</code>, <code class="language-plaintext highlighter-rouge">Authority</code> 등의 서브 도메인은 위 그림에서 생략함</li>
  <li>단순함을 위해 인증을 위한 엔드포인트 外의 리소스 엔드포인트는 아래 표에서 생략함</li>
</ul>

<table>
  <thead>
    <tr>
      <th>엔드포인트</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">POST /oauth/token</code></td>
      <td>토큰 획득 및 갱신</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">GET /oauth/token_key</code></td>
      <td>토큰 인코드, 디코드를 위한 공개키 조회</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th>그랜트</th>
      <th>client_id</th>
      <th>client_secret</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Password</td>
      <td><code class="language-plaintext highlighter-rouge">web_app</code></td>
      <td><code class="language-plaintext highlighter-rouge">changeit</code></td>
    </tr>
    <tr>
      <td>ClientCredentials</td>
      <td><code class="language-plaintext highlighter-rouge">internal</code></td>
      <td><code class="language-plaintext highlighter-rouge">internal</code></td>
    </tr>
  </tbody>
</table>

<p>JhipsterUAA는 아래 명령으로 설치하고 구동할 수 있습니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>wget https://github.com/appkr/msa-starter/raw/master/jhipster-uaa.zip
<span class="nv">$ </span>unzip jhipster-uaa.zip <span class="o">&amp;&amp;</span> <span class="nb">cd </span>jhipster-uaa <span class="o">&amp;&amp;</span> ./gradlew clean bootRun
</code></pre></div></div>

<h4 id="laravel">Laravel</h4>
<ul>
  <li>Example 도메인</li>
  <li>인증/인가된 사용자만 ExampleAPI 사용 가능</li>
  <li>Port 8000</li>
</ul>

<p>예제 소스코드를 복제했다면 아래 명령으로 Laravel 서비스를 구동할 수 있습니다</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-compose <span class="nt">-f</span> docker/docker-compose.yml up
<span class="nv">$ </span>open http://localhost:8000
</code></pre></div></div>

<h4 id="spring">Spring</h4>
<ul>
  <li>Hello 도메인</li>
  <li>인증/인가된 사용자만 HelloAPI 사용 가능</li>
  <li>Port 8080</li>
</ul>

<p>예제 소스코드를 복제했다면 아래 명령으로 Spring 서비스를 구동할 수 있습니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>hello-service <span class="o">&amp;&amp;</span> ./gradlew clean bootRun
</code></pre></div></div>

<p>큰 그림을 요약하고, 전체 작동 플로우를 정리하면 아래 시퀀스 다이어그램과 같습니다.</p>

<p><img src="/images/2021-02-13-microservice3.svg" alt="" /></p>
<div class="text-center"><small>마이크로 서비스 시퀀스</small></div>

<h3 id="-로그인-및-토큰-획득">① 로그인 및 토큰 획득</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Client</code>는 <code class="language-plaintext highlighter-rouge">web_app</code>/<code class="language-plaintext highlighter-rouge">changeit</code> 사용자 계정과 Password 그랜트를 이용하여 <code class="language-plaintext highlighter-rouge">UAA</code>로부터 JWT<small class="text-muted">Json Web Token</small>를 발급 받는다
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ RESPONSE</span><span class="o">=</span>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'http://localhost:9999/oauth/token'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Basic  d2ViX2FwcDpjaGFuZ2VpdA=='</span> <span class="se">\</span>
  <span class="nt">--data-urlencode</span> <span class="s1">'grant_type=password'</span> <span class="se">\</span>
  <span class="nt">--data-urlencode</span> <span class="s1">'username=user'</span> <span class="se">\</span>
  <span class="nt">--data-urlencode</span> <span class="s1">'password=user'</span> <span class="se">\</span>
  <span class="nt">--data-urlencode</span> <span class="s1">'scope=openid'</span>
</code></pre></div>    </div>
    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX25hbWUiOiJ1c2VyIiwic2NvcGUiOlsib3BlbmlkIl0sImV4cCI6MTYxMjQ5ODAyMywiaWF0IjoxNjEyNDk3NzIzLCJhdXRob3JpdGllcyI6WyJST0xFX1VTRVIiXSwianRpIjoiREJmM0g0NHRlVFhOVmNEWjBBeWJTQUY3dFBZIiwiY2xpZW50X2lkIjoid2ViX2FwcCJ9.Y4py8MMHJdMwbXxpocdQPrMEevRnl2nkEUuXw6UeRmtB7qWDFADmzO-xQz8Hkvmz2LT0U4gPSHvRSOEWGuZ_Nack8MRU7ICWGRl53WZyiPTzt7ucLcO0w1eOBUPFxsHQHffyZ4XzrDJWlqWadhzlnxw9oJUcvi8aAKkBtBSVOCslxYMkBNzs7vjxbLHNQIAjZbb1YetBzpAQOq8RJCdSQNDcMSZ9eZG705ucaFBv3LgDf5sxK47Yqqqk3oCMDdyMXB2MW2bsFivpf6BZd3ydfHrCgcrU5y2Vl2g6fG6PsADkaJ4Fv31UdVj0QG-kX8fgj9GL7MjZUyI-bWruiLNTgw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX25hbWUiOiJ1c2VyIiwic2NvcGUiOlsib3BlbmlkIl0sImF0aSI6IkRCZjNINDR0ZVRYTlZjRFowQXliU0FGN3RQWSIsImV4cCI6MTYxMzEwMjUyMywiaWF0IjoxNjEyNDk3NzIzLCJhdXRob3JpdGllcyI6WyJST0xFX1VTRVIiXSwianRpIjoicDhWQVB5aWhHU3NGYXlma1pMWnd1MURLSHBrIiwiY2xpZW50X2lkIjoid2ViX2FwcCJ9.gD4uoRwk_kbX19uUBxnUdvmu3KDZBrTLWeY0h6lj-UVvhKaUF7BNH1AzwSfX10y-tYjdfElk7_m7x6Vo9gG93HMUPtnSQPPNknI6KcE4sFRRs-Wk15o74S7ukiSjvdtq9Bx2u7t6EEd3e1UHHcRYLFwxJUND53YRM7VR38QWhJgxGW6aA6EK4Rz7fgqFaylK8xWlFjhYoFl3w_VBErqDZWyprKRl9IDDrd6xCo-5RIauuLGGvMTim9IhedaSwTDN7fJz68tyJinfejIjEVjnw90MPCAKzwYY2As30i7AdIPzUrvJPHSjhlZnZ9lSU6_BufQUw1caBQe-vSbtXx0pMw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">299</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"openid"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"iat"</span><span class="p">:</span><span class="w"> </span><span class="mi">1612497723</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jti"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DBf3H44teTXNVcDZ0AybSAF7tPY"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
</ul>

<h3 id="-exampleapi-사용">② ExampleAPI 사용</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Client</code>는 발급 받은 JWT로 <code class="language-plaintext highlighter-rouge">Laravel</code> 서비스의 Example 리소스를 조회하고 변경한다
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ ACCESS_TOKEN</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nv">$RESPONSE</span> | jq .access_token | xargs<span class="si">)</span>
<span class="nv">$ </span>curl <span class="nt">-s</span> <span class="nt">-H</span> <span class="s1">'Accept:application/json'</span> <span class="nt">-H</span> <span class="s2">"Authorization: bearer </span><span class="k">${</span><span class="nv">ACCESS_TOKEN</span><span class="k">}</span><span class="s2">"</span> http://localhost:8000/api/examples
</code></pre></div>    </div>
    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"이문세 5집"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-05T02:18:46.000000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-05T02:18:46.000000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"created_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d593f9ef-d089-44fe-abe7-05c30219bb4c"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"updated_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d593f9ef-d089-44fe-abe7-05c30219bb4c"</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"page"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"totalElements"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"totalPages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
</ul>

<h3 id="-laravel---helloapi-사용">③ Laravel -&gt; HelloAPI 사용</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Laravel</code> 서비스는 <code class="language-plaintext highlighter-rouge">internal</code>/<code class="language-plaintext highlighter-rouge">internal</code> 클라이언트 계정과 ClientCredentials 그랜트를 이용하여 UAA로부터 JWT를 발급 받는다</li>
  <li>발급 받은 JWT로 HelloAPI 리소스를 조회한다</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-s</span> <span class="nt">-H</span> <span class="s1">'Accept:application/json'</span> <span class="nt">-H</span> <span class="s2">"Authorization: bearer </span><span class="k">${</span><span class="nv">ACCESS_TOKEN</span><span class="k">}</span><span class="s2">"</span> http://localhost:8000/api/hello
</code></pre></div></div>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">"Hello from non-laravel service"</span><span class="w">
</span></code></pre></div></div>

<h3 id="-토큰-유효성-검사">④ 토큰 유효성 검사</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Laravel</code>, <code class="language-plaintext highlighter-rouge">Spring</code> 서비스는 클라이언트가 제출한 JWT의 유효성 검사에 필요한 공개키를 <code class="language-plaintext highlighter-rouge">UAA</code>로부터 조회한다</li>
  <li>받은 공개 키로 토큰 유효성을 검증하는 방법은 구현할 때 설명할 예정</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'http://localhost:9999/oauth/token_key'</span>
</code></pre></div></div>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHA256withRSA"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN PUBLIC KEY-----</span><span class="se">\n</span><span class="s2">MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAlo/L8mU9Isiihp1ksxeOrJzPn4915xZC/pnbO+ur/ccZL23BYHP/wUxpWZy8Gh94+GK8/gcjVEk66acg4Gk7NH0uQGxdrq8WDMywPIAawekwiQJd6l/yVNXIDhuk0LzcgmU+1ESyeTNdlx84Z0X3HI6w8SH6OE4RBcr9rGfIt0ytXmHj1P4zxmJt/YhZyyyUq0WGuBq31UaQTOiJa0rp1kDKSMN0Hvz4UmkYtUvgtqUujrqNcWkSEummO8WyuhnCs+zAaF2KA5XSalEXFNiILwFPtQFxqIQrjjiWcI61vvTxtor4zI5r4X6aDteYIJidAzYwkIiuacnLWX5ziL3j+wIDAQAB</span><span class="se">\n</span><span class="s2">-----END PUBLIC KEY-----"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<ul>
  <li>공개 키의 본문은 64글자 단위로 줄 바꿈해야 함; 따라서 이런 모양으로 포맷팅해서 사용해야 함</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">-----BEGIN</span> PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAlo/L8mU9Isiihp1ksxeO
rJzPn4915xZC/pnbO+ur/ccZL23BYHP/wUxpWZy8Gh94+GK8/gcjVEk66acg4Gk7
NH0uQGxdrq8WDMywPIAawekwiQJd6l/yVNXIDhuk0LzcgmU+1ESyeTNdlx84Z0X3
HI6w8SH6OE4RBcr9rGfIt0ytXmHj1P4zxmJt/YhZyyyUq0WGuBq31UaQTOiJa0rp
1kDKSMN0Hvz4UmkYtUvgtqUujrqNcWkSEummO8WyuhnCs+zAaF2KA5XSalEXFNiI
LwFPtQFxqIQrjjiWcI61vvTxtor4zI5r4X6aDteYIJidAzYwkIiuacnLWX5ziL3j
+wIDAQAB
<span class="nt">-----END</span> PUBLIC KEY-----
</code></pre></div></div>

<h2 id="2-oauth2-이해하기">2 OAuth2 이해하기</h2>

<p>OAuth2에 대한 지식이 부족하기도 하거니와, 방대한 주제라 블로그 포스트에서 설명하기는 어렵습니다. <a href="https://oauth2.thephpleague.com/authorization-server/which-grant/">thephpleague의 문서</a>를 차분히 읽어보실 것을 권장합니다. 이 예제에서는 <code class="language-plaintext highlighter-rouge">Password</code>와 <code class="language-plaintext highlighter-rouge">ClientCredentials</code> 그랜트만 사용합니다.</p>

<p><strong><code class="language-plaintext highlighter-rouge">Password</code> 그랜트는 1st Party 클라이언트</strong>, 즉 내부에서 만든 클라이언트 애플리케이션을 위한 인증 방법입니다. Facebook을 예로 들어볼까요? Facebook 입장에서 공식 앱은 1st Party 클라이언트입니다. 페북 공식 앱을 사용하기 위해선 페북 사용자 아이디와 비밀번호를 제출해야하죠? 계정 정보가 정확하면 페북 인증 서버는 공식 앱에 <code class="language-plaintext highlighter-rouge">access_token</code>을 발급하고, 공식 앱은 발급 받은 토큰을 제출하면서 내 타임라인 데이터를 조회하고, 조회한 데이터를 뷰에 바인딩해서 렌더링할겁니다.</p>

<p><strong><code class="language-plaintext highlighter-rouge">ClientCredentials</code> 그랜트는 주로 1st Party 서버</strong>를 위한 인증 방법입니다. 예를들어 페북 친구 서비스는 중요한 리소스라 아무나 조회하거나 변경해서는 안됩니다. 친구 추천 서버가 친구 서버와 통신할 때, 페북 인증 서버에서 받은 <code class="language-plaintext highlighter-rouge">access_token</code>으로 자격증명을 제출하고 친구 목록을 얻어올 겁니다.</p>

<p>어떤 그랜트를 쓰든 보호된 리소스를 요청할 때 <code class="language-plaintext highlighter-rouge">Authorization</code> 요청 헤더에 <code class="language-plaintext highlighter-rouge">access_token</code>을 제출해야 합니다, 이렇게 말이죠.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">GET /api/protected-resources
Authorization: bearer access_token
</span></code></pre></div></div>

<h2 id="3-jwt-이해하기">3 JWT 이해하기</h2>

<p>OAuth2 인증 서버는 <code class="language-plaintext highlighter-rouge">access_token</code>으로 JWT를 사용할 필요는 없습니다. 만약 <code class="language-plaintext highlighter-rouge">Password</code> 또는 <code class="language-plaintext highlighter-rouge">ClientCredentials</code> 그랜트 인증 요청에 대해 JWT가 아닌 난수 토큰을 제공했다 가정해보죠. 클라언트는 마이크로 서비스의 보호된 리소스를 사용하기위해 난수 토큰을 제출할테고, 요청을 받은 마이크로 서비스를 받은 난수 토큰의 유효성을 검증해야 하는데… 아마도 마이크로 서비스가 받은 난수 토큰이 유효한지 OAuth2 인증 서버에 다시 물어봐야겠죠~ 뿐더러 <code class="language-plaintext highlighter-rouge">createdBy</code>, <code class="language-plaintext highlighter-rouge">updatedBy</code> 등의 필드 값을 채우려면 난수 토큰에 해당하는 사용자 정보도 조회하고 메모리에 보관하고 있어야 할 겁니다.</p>

<p>JWT는 토큰 본문 안에 여러 가지 정보를 담은 <code class="language-plaintext highlighter-rouge">access_token</code>을 만들 수 있기 때문에 앞서 언급한 문제점들을 해결할 수 있습니다.</p>

<p>1절에서 받은 <code class="language-plaintext highlighter-rouge">access_token</code>을 <a href="https://jwt.io">https://jwt.io</a>에서 파싱해보겠습니다. 아래 그림의 왼쪽 입력 박스에 토큰을 붙여 넣으면, 오른쪽에 파싱된 정보가 나옵니다.</p>

<p><img src="/images/2021-02-13-jwt.png" alt="" /></p>
<div class="text-center"><small>JWT 파싱</small></div>

<h3 id="header">HEADER</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">alg</code>: 알고리즘</li>
  <li><code class="language-plaintext highlighter-rouge">typ</code>: 토큰 타입 (jwt OR jwk)</li>
</ul>

<h3 id="payload">PAYLOAD</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">iat</code>: 발급일</li>
  <li><code class="language-plaintext highlighter-rouge">exp</code>: 만료일</li>
  <li><code class="language-plaintext highlighter-rouge">jti</code>: JWT ID</li>
  <li><code class="language-plaintext highlighter-rouge">user_name</code>, <code class="language-plaintext highlighter-rouge">scope</code>, <code class="language-plaintext highlighter-rouge">authorities</code>, <code class="language-plaintext highlighter-rouge">client_id</code>: 커스텀 클레임</li>
</ul>

<h3 id="signature">SIGNATURE</h3>
<ul>
  <li>1절 “④ 토큰 유효성 검사”에서 조회한 공개 키를 입력 박스에 넣는다; 공개 키를 넣지 않아도 파싱은 된다</li>
  <li><strong>공개 키를 넣어서 토큰 유효성이 검증되면 네트워크 구간에서 토큰이 변조되지 않았음을 확신할 수 있다</strong></li>
</ul>

<h3 id="jwt-라이브러리-설치">JWT 라이브러리 설치</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>composer require firebase/php-jwt
</code></pre></div></div>

<p>전체 예제 코드는 <a href="https://github.com/appkr/laravel-msa-example">https://github.com/appkr/laravel-msa-example</a>에서 볼 수 있습니다.</p>

<p>2부에서 이어집니다</p>

      </div>

      <footer class="box-tags">
        <span><i class="material-icons">label</i> Tags:</span>
        
          <a href="/tags#PHP">
            PHP
          </a>
          , 
        
          <a href="/tags#Laravel">
            Laravel
          </a>
          , 
        
          <a href="/tags#MSA">
            MSA
          </a>
          , 
        
          <a href="/tags#Oauth2">
            Oauth2
          </a>
          
        
      </footer>
    </article>

    <nav id="pagination">
      <ul class="pager">
        
        <li class="previous">
          <a href="/learn-n-think/the-travelers-gift/">
            <span aria-hidden="true">
              <i class="material-icons">navigate_before</i>
            </span>
            <span class="pager-title-sm">Older</span>
            <span class="pager-title">
              REVISIT 폰더씨의 위대한 하루
            </span>
          </a>
        </li>
        

        
        <li class="next">
          <a href="/work-n-play/laravel-msa-example-part-2/">
            <span class="pager-title">
              라라벨 마이크로서비스 예제 2부
            </span>
            <span class="pager-title-sm">Newer</span>
            <span aria-hidden="true">
              <i class="material-icons">navigate_next</i>
            </span>
          </a>
        </li>
        
      </ul>
    </nav>

    <div class="comments" style="margin-bottom: 30px;">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//appkr.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

  </section>

  <aside id="sidebar" class="col-md-3">
    <section id="search_sidebar" class="box hidden-xs">
  <div class="box-body">
    <form action="#">
      <div class="form-group">
        <input class="form-control input-lg" type="text" id="q_sidebar" placeholder="Search...">
        <ul id="q_sidebar_res"></ul>
      </div>
    </form>
  </div>
</section>

<section class="box" id="categories">
  <div class="box-header">
    <h3>Categories</h3>
  </div>

  <div class="box-body">
    <ul>
      <li>
        <a href="/categories#around-me">
          Around Me
          <span class="badge">25</span>
        </a>
      </li>
      <li>
        <a href="/categories#learn-n-think">
          Learn & Think
          <span class="badge">84</span>
        </a>
      </li>
      <li>
        <a href="/categories#work-n-play">
          Work & Play
          <span class="badge">70</span>
        </a>
      </li>
      <li>
        <a href="/categories#cheatsheet">
          Cheatsheet
          <span class="badge">4</span>
        </a>
      </li>
      <li>
        <a href="/categories#imported">
          Imported
          <span class="badge">3</span>
        </a>
      </li>
      <li>
        <a href="/categories#uncategorized">
          Uncategorized
          <span class="badge">2</span>
        </a>
      </li>
    </ul>
  </div>
</section>

<section class="box" id="tags">
  <div class="box-header">
    <h3>Tags</h3>
  </div>

  <div class="box-body tags">
    <div class="tags">
    
    
    <span style="font-size: 98%">
      <a href="/tags#3d">
        3d
      </a>
    </span>
    
    <span style="font-size: 106%">
      <a href="/tags#API">
        API
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#AWS">
        AWS
      </a>
    </span>
    
    <span style="font-size: 102%">
      <a href="/tags#Apache Thrift">
        Apache Thrift
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#CSS">
        CSS
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#CleanCode">
        CleanCode
      </a>
    </span>
    
    <span style="font-size: 102%">
      <a href="/tags#DDD">
        DDD
      </a>
    </span>
    
    <span style="font-size: 102%">
      <a href="/tags#Database">
        Database
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#DevOps">
        DevOps
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#Docker">
        Docker
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#Dotfiles">
        Dotfiles
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#ELK">
        ELK
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#Generator">
        Generator
      </a>
    </span>
    
    <span style="font-size: 106%">
      <a href="/tags#Git">
        Git
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#JWT">
        JWT
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#Javascript">
        Javascript
      </a>
    </span>
    
    <span style="font-size: 110%">
      <a href="/tags#Jekyll">
        Jekyll
      </a>
    </span>
    
    <span style="font-size: 158%">
      <a href="/tags#Laravel">
        Laravel
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#Linux">
        Linux
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#Log">
        Log
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#Lumen">
        Lumen
      </a>
    </span>
    
    <span style="font-size: 102%">
      <a href="/tags#MSA">
        MSA
      </a>
    </span>
    
    <span style="font-size: 102%">
      <a href="/tags#OOP">
        OOP
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#OS X">
        OS X
      </a>
    </span>
    
    <span style="font-size: 102%">
      <a href="/tags#Oauth2">
        Oauth2
      </a>
    </span>
    
    <span style="font-size: 162%">
      <a href="/tags#PHP">
        PHP
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#Programming">
        Programming
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#RESTful">
        RESTful
      </a>
    </span>
    
    <span style="font-size: 102%">
      <a href="/tags#RPC">
        RPC
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#Refactoring">
        Refactoring
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#Ruby">
        Ruby
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#Security">
        Security
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#Swagger">
        Swagger
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#UML">
        UML
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#URL Rewriting">
        URL Rewriting
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#Web">
        Web
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#Websocket">
        Websocket
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#adobe">
        adobe
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#amazon">
        amazon
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#amd">
        amd
      </a>
    </span>
    
    <span style="font-size: 142%">
      <a href="/tags#android">
        android
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#apple">
        apple
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#ar">
        ar
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#architecture">
        architecture
      </a>
    </span>
    
    <span style="font-size: 110%">
      <a href="/tags#arm">
        arm
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#bada">
        bada
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#bluetooth">
        bluetooth
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#bus">
        bus
      </a>
    </span>
    
    <span style="font-size: 102%">
      <a href="/tags#cdp">
        cdp
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#chrome">
        chrome
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#cloud">
        cloud
      </a>
    </span>
    
    <span style="font-size: 114%">
      <a href="/tags#codec">
        codec
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#connectivity">
        connectivity
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#cpu">
        cpu
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#ebook">
        ebook
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#emulator">
        emulator
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#flash">
        flash
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#framework">
        framework
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#gms">
        gms
      </a>
    </span>
    
    <span style="font-size: 110%">
      <a href="/tags#google">
        google
      </a>
    </span>
    
    <span style="font-size: 110%">
      <a href="/tags#gtd">
        gtd
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#intel">
        intel
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#ios">
        ios
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#iphone">
        iphone
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#java">
        java
      </a>
    </span>
    
    <span style="font-size: 106%">
      <a href="/tags#lbs">
        lbs
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#limo">
        limo
      </a>
    </span>
    
    <span style="font-size: 106%">
      <a href="/tags#linux">
        linux
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#mcu">
        mcu
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#memory">
        memory
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#microsoft">
        microsoft
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#mobile">
        mobile
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#opencore">
        opencore
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#opengl">
        opengl
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#opengles">
        opengles
      </a>
    </span>
    
    <span style="font-size: 102%">
      <a href="/tags#opensource">
        opensource
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#openvg">
        openvg
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#platform">
        platform
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#pnd">
        pnd
      </a>
    </span>
    
    <span style="font-size: 106%">
      <a href="/tags#presentation">
        presentation
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#pvcore">
        pvcore
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#se">
        se
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#sns">
        sns
      </a>
    </span>
    
    <span style="font-size: 114%">
      <a href="/tags#soc">
        soc
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#symbian">
        symbian
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#tech">
        tech
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#ted">
        ted
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#tedx">
        tedx
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#windowsmobile">
        windowsmobile
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#wss">
        wss
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#x86">
        x86
      </a>
    </span>
    
    <span style="font-size: 110%">
      <a href="/tags#史記">
        史記
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#孟子">
        孟子
      </a>
    </span>
    
    <span style="font-size: 102%">
      <a href="/tags#孫子兵法">
        孫子兵法
      </a>
    </span>
    
    <span style="font-size: 298%">
      <a href="/tags#개발자">
        개발자
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#경력개발">
        경력개발
      </a>
    </span>
    
    <span style="font-size: 142%">
      <a href="/tags#기업철학">
        기업철학
      </a>
    </span>
    
    <span style="font-size: 174%">
      <a href="/tags#기획자">
        기획자
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#데이터베이스">
        데이터베이스
      </a>
    </span>
    
    <span style="font-size: 146%">
      <a href="/tags#리더쉽">
        리더쉽
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#생산성">
        생산성
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#소프트웨어공학">
        소프트웨어공학
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#수학">
        수학
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#아키텍처">
        아키텍처
      </a>
    </span>
    
    <span style="font-size: 218%">
      <a href="/tags#인생철학">
        인생철학
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#자녀교육">
        자녀교육
      </a>
    </span>
    
    <span style="font-size: 102%">
      <a href="/tags#전략">
        전략
      </a>
    </span>
    
    <span style="font-size: 150%">
      <a href="/tags#조직관리">
        조직관리
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#조직문화">
        조직문화
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#조직행동">
        조직행동
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#철학">
        철학
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#취미">
        취미
      </a>
    </span>
    
    <span style="font-size: 94%">
      <a href="/tags#특기">
        특기
      </a>
    </span>
    
    <span style="font-size: 102%">
      <a href="/tags#프로세스">
        프로세스
      </a>
    </span>
    
    <span style="font-size: 98%">
      <a href="/tags#프로젝트관리">
        프로젝트관리
      </a>
    </span>
    
    </div>
  </div>
</section>

<section class="box" id="recent-posts">
  <div class="box-header">
    <h3>Recent Posts</h3>
  </div>

  <div class="box-body">
    <ul>
      
      <li>
        <h4>
          <small class="box-meta"><i class="material-icons">today</i> 2022-01-15</small>
          <a href="/work-n-play/laravel-service-provider/">라라벨 서비스프로바이더에 바인드된 로직은 언제 실행될까요?</a>
        </h4>
      </li>
      
      <li>
        <h4>
          <small class="box-meta"><i class="material-icons">today</i> 2021-02-17</small>
          <a href="/work-n-play/laravel-msa-example-part-3/">라라벨 마이크로서비스 예제 3부</a>
        </h4>
      </li>
      
      <li>
        <h4>
          <small class="box-meta"><i class="material-icons">today</i> 2021-02-15</small>
          <a href="/work-n-play/laravel-msa-example-part-2/">라라벨 마이크로서비스 예제 2부</a>
        </h4>
      </li>
      
    </ul>
  </div>
</section>

<section class="box" id="recent-comments">
  <div class="box-header">
    <h3>Recent Comments</h3>
  </div>

  <div class="box-body dsq-widget">
    <script type="text/javascript" src="//appkr.disqus.com/recent_comments_widget.js?num_items=3&hide_mods=0&hide_avatars=0&avatar_size=32&excerpt_length=100"></script>
  </div>
</section>

<section class="box" id="recent-feeds">
  <div class="box-header">
    <h3>Facebook Posts</h3>
  </div>

  <div class="box-body">
    <ul id="facebook-feed">
      <script id="facebook-feed-template" type="text/x-template">
        <li>
          <span class="facebook-message">
            { message }
          </span>
          ·
          <span class="facebook-meta">
            <a href="https://www.facebook.com/juwonkimatmedotcom/posts/{ id }">
              { created_time }
            </a>
          </span>
        </li>
      </script>
    </ul>
  </div>
</section>

<section class="box" id="youtube-lists">
  <div class="box-header">
    <h3>Youtube Videos</h3>
  </div>

  <div class="box-body">
    <ul id="youtube-list">
      <script id="youtube-list-template" type="text/x-template">
        <li>
          <span class="facebook-message">
            { message }
          </span>
          ·
          <span class="facebook-meta">
            <a href="https://www.youtube.com/watch?v={ id }">
              { created_time }
            </a>
          </span>
        </li>
      </script>
    </ul>
  </div>
</section>

<section class="box" id="gist-lists">
  <div class="box-header">
    <h3>Github Gist</h3>
  </div>

  <div class="box-body">
    <ul id="gist-list">
      <script id="gist-list-template" type="text/x-template">
        <li>
          <span class="facebook-message">
            { message }
          </span>
          ·
          <span class="facebook-meta">
            <a href="https://gist.github.com/{ id }">
              { created_time }
            </a>
          </span>
        </li>
      </script>
    </ul>
  </div>
</section>

<section class="box" id="activity-lists">
  <div class="box-header">
    <h3>Github Activity</h3>
  </div>

  <div class="box-body">
    <ul id="activity-list">
      <script id="activity-list-template" type="text/x-template">
        <li>
          <span class="facebook-message">
            <small>{ type }</small>: { message }
          </span>
          ·
          <span class="facebook-meta">
            <a href="https://github.com/{ repoName }/commits">
              { created_time }
            </a>
          </span>
        </li>
      </script>
    </ul>
  </div>
</section>

  </aside>
</div>


  <footer id="site-footer">
  <h4>
    <a href="/">
      Appkr.memo(new Story())
    </a>
  </h4>
  <p>
    &copy; 2008~2022 •
    Built with <a href="http://jekyllrb.com/">Jekyll</a> •
    Hosted by <a href="https://pages.github.com/">Github</a> •
    <a href="/feed.xml">Rss</a>
  </p>
</footer>


  <div id="back-to-top">
    <a href="#" title="Scroll to Top">
      <i class="material-icons">keyboard_arrow_up</i>
    </a>
  </div>

  <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/simple-jekyll-search/1.1.1/jekyll-search.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.7/js/material.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.7/js/ripples.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/4.0.1/ekko-lightbox.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
  <script src="/scripts/fat.js"></script>
  <script src="/scripts/main.js"></script>
</body>

</html>
